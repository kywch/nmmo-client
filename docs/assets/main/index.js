System.register("chunks:///_virtual/UIStatisticalItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a,n,l,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Label,s=e.Component}],execute:function(){var c,u,p,g,m,b,d,f,h,y,v,k,z,I,w,S,_;n._RF.push({},"01b20LnmqRCk6FvpJOVhGT8","UIStatisticalItem",void 0);var D=l.ccclass,L=l.property;e("UIStatisticalItem",(c=D("UIStatisticalItem"),u=L(o),p=L(o),g=L(o),m=L(o),b=L(o),d=L(o),f=L(o),c((v=t((y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(a(t),"rank",v,a(t)),r(a(t),"teamName",k,a(t)),r(a(t),"score",z,a(t)),r(a(t),"alive",I,a(t)),r(a(t),"defeat",w,a(t)),r(a(t),"gold",S,a(t)),r(a(t),"dmgtaken",_,a(t)),t}i(t,e);var n=t.prototype;return n.start=function(){},n.bindData=function(e){this.rank.string=e.isEnd?""+e.rank:"-",this.teamName.string=e.teamName,this.score.string=e.isEnd?""+e.score:"-",this.alive.string=e.isEnd?""+e.alive:"-",this.defeat.string=""+e.defeat,this.gold.string=""+e.gold,this.dmgtaken.string=""+Math.round(e.dmgtaken)},t}(s)).prototype,"rank",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(y.prototype,"teamName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(y.prototype,"score",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(y.prototype,"alive",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"defeat",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(y.prototype,"gold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(y.prototype,"dmgtaken",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./ResourcesHelper.ts"],(function(e){"use strict";var i,t,n,r,l,o,a,u,s,c,p,m,h,d,b;return{setters:[function(e){i=e.defineProperty,t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,l=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,u=e._decorator,s=e.Enum,c=e.Sprite,p=e.Label,m=e.SpriteFrame,h=e.Component},function(e){d=e.Utils},function(e){b=e.ResourcesHelper}],execute:function(){var v,f,g,y,S,_,w,L,q,I,F,N,R,z,C,P,k;e("ItemName",void 0),a._RF.push({},"035eaTLEHVB1bCWGryF2jwF","UIItem",void 0);var B,G=u.ccclass,H=u.property;!function(e){e[e.Arcane=0]="Arcane",e[e.Bottom=1]="Bottom",e[e.Bow=2]="Bow",e[e.Chisel=3]="Chisel",e[e.Gloves=4]="Gloves",e[e.Gold=5]="Gold",e[e.Hat=6]="Hat",e[e.Pickaxe=7]="Pickaxe",e[e.Poultice=8]="Poultice",e[e.Ration=9]="Ration",e[e.Rod=10]="Rod",e[e.Scrap=11]="Scrap",e[e.Shard=12]="Shard",e[e.Shaving=13]="Shaving",e[e.Sword=14]="Sword",e[e.Top=15]="Top",e[e.Wand=16]="Wand"}(B||(B=e("ItemName",{}))),s(B);e("UIItem",(v=G("UIItem"),f=H(c),g=H(c),y=H(p),S=H(p),_=H(m),w=H(m),v((k=P=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(l(t),"bg",I,l(t)),r(l(t),"icon",F,l(t)),r(l(t),"numLabel",N,l(t)),r(l(t),"levelLabel",R,l(t)),r(l(t),"equipedSprite",z,l(t)),r(l(t),"unEquipedSprite",C,l(t)),i(l(t),"_equiped",void 0),i(l(t),"_num",0),i(l(t),"_level",0),i(l(t),"_itemName",void 0),t}n(t,e);var a=t.prototype;return a.start=function(){},a.bindData=function(e,i){void 0===i&&(i=!1),null==e?(this._itemName="",this.icon.spriteFrame=null,this.num=0,this.numLabel.node.active=!1,this.level=0,this.levelLabel.node.active=!1,this.equiped=!1):(this._itemName=e.item,this.icon.spriteFrame=b.GetItemIcon(e.item),null==this.icon.spriteFrame&&console.error(" this.icon.spriteFrame error  ",e.item),this.num=e.quantity,this.numLabel.node.active=-1!=t.ShowNumberKey.indexOf(this._itemName.toLowerCase()),this.level=e.level,this.levelLabel.node.active="gold"!=this._itemName.toLowerCase(),this.equiped=i)},o(t,[{key:"equiped",set:function(e){this._equiped!=e&&(this._equiped=e,this.bg.spriteFrame=e?this.equipedSprite:this.unEquipedSprite)}},{key:"num",get:function(){return this._num},set:function(e){this._num=e,this.numLabel.string=""+e}},{key:"level",get:function(){return this._level},set:function(e){this._level=e,this.levelLabel.string=""+d.ConvertToRoman(e)}}]),t}(h),i(P,"ShowNumberKey",["gold","scrap","shaving","shard"]),I=t((q=k).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(q.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(q.prototype,"numLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(q.prototype,"levelLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(q.prototype,"equipedSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(q.prototype,"unEquipedSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=q))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/Range.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillItem.ts"],(function(t){"use strict";var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.SkillItem}],execute:function(){var s;n._RF.push({},"080advRFpBNsLd++B4keVMX","Range",void 0);var c=r.ccclass;r.property,t("Range",c("Range")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){this.flyToTaget()},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/NPCResources.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceGroup.ts"],(function(e){"use strict";var t,r,s,u,o;return{setters:[function(e){t=e.inheritsLoose,r=e.defineProperty,s=e.assertThisInitialized},function(e){u=e.cclegacy},function(e){o=e.ResourceGroup}],execute:function(){u._RF.push({},"0b2deY71mZK17TrIYyzzNg5","NPCResources",void 0);e("NPCResources",function(e){function u(){var t;return t=e.call(this)||this,r(s(t),"health",void 0),t.health=t.AddResource("health"),t}return t(u,e),u}(o));u._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./ResourcesHelper.ts"],(function(e){"use strict";var t,n,o,i,a,r,l,s,c,d,u,p,f,g,h,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty,r=e.asyncToGenerator},function(e){l=e.cclegacy,s=e._decorator,c=e.Label,d=e.Node,u=e.resources,p=e.director,f=e.Component,g=e.math,h=e.randomRange},function(e){b=e.GlobalConfig},function(e){m=e.ResourcesHelper}],execute:function(){var w,y,L,v,R,F,D,x,S,M,k;l._RF.push({},"0b57dA4RDtH9IgcMxyFidzf","Main",void 0);var A=s.ccclass,U=s.property;e("Main",(w=A("Main"),y=U(c),L=U(c),v=U(d),R=U(d),w((x=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(i(t),"uploadLabel",x,i(t)),o(i(t),"loadingLabel",S,i(t)),o(i(t),"btnUpload",M,i(t)),o(i(t),"btnDemo",k,i(t)),a(i(t),"file",void 0),t}n(t,e);var l=t.prototype;return l.start=function(){var e=this.GetQueryString(window.location);"LOCAL"==e?this.initLocalUpload():"ERROR"==e?alert("The URL link does not exist. Please check it !!!"):this.initWebUpload(e)},l.initWebUpload=function(e){u.loadDir(m.character),this.loadingLabel.string="Downloading Replay File . . .",this.uploadLabel.string="0%",this.loadingLabel.node.active=!0,this.uploadLabel.node.active=!0,this.btnUpload.active=!1;var t,n=1,o=!1;this.schedule((function i(){if(++n<=18&&(this.uploadLabel.string=(100*n/18).toFixed(1)+"%"),3==n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.send(),a.onload=function(e){if(null!=window.LZMA){var n=a.response,i=new window.LZMA.iStream(n),r=new window.LZMA.oStream;window.LZMA.decompressFile(i,r),t=r.toString(),o=!0}}}o&&(b.replay=JSON.parse(t),p.loadScene("Game")),19==n&&this.unschedule(i)}),.3)},l.handleFileRead=function(e,t,n,o){e.onload=function(i){FileReader.DONE==e.readyState&&o.onFileLoad(e,t,n,o)},e.onprogress=function(e){o.uploadLabel.string=(e.loaded/e.total*100).toFixed(1)+"%"}},l.initLocalUpload=function(){u.loadDir(m.character),u.loadDir(m.Map),this.loadingLabel.string="Loading . . .",this.uploadLabel.string="0%";var e=document.createElement("input"),t=!0;e.type="file",e.name="fileToUpload",e.accept=".json, .replay, .lzma, .xz",e.style.width="10px",e.style.height="10px",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.margin="auto",e.style.position="absolute",e.style.fontSize="30px",e.style.opacity="0";var n=new FileReader,o=this;e.onchange=function(i){if(e.files.length>0){o.loadingLabel&&(o.loadingLabel.node.active=!0),o.uploadLabel&&(o.uploadLabel.node.active=!0),o.btnUpload&&(o.btnUpload.active=!1);var a=e.files[0].name;"json"==a.split(".").pop().toLowerCase()?n.readAsText(e.files[0]):(console.log(a),t=!1,n.readAsArrayBuffer(e.files[0])),o.handleFileRead(n,t,e.files[0],o)}else console.log("files error ")},n.onprogress=function(e){o.uploadLabel.string=(e.loaded/e.total*100).toFixed(1)+"%"},document.body.appendChild(e),this.file=e},l.onFileLoad=function(){var e=r(regeneratorRuntime.mark((function e(t,n,o,i){var a,r,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.PrepareLoad(),e.prev=1,1!=n){e.next=7;break}b.replay=JSON.parse(t.result),p.loadScene("Game"),e.next=18;break;case 7:if(null!=window.LZMA){e.next=9;break}return e.abrupt("return");case 9:i.loadingLabel.string="Decompressing . . .",i.uploadLabel.string="0%",i.loadingLabel.string="Decompressing . . .",a=0,r=0,l=0,s=setInterval((function(){if(l>10){l=0,i.loadingLabel.string="Decompressing ";for(var e=0;e<a;e++)i.loadingLabel.string+=" .";a=++a>3?0:a}else l++;g.random()>=.9&&(r+=h(.1,5),r=Math.min(r,99.99),i.uploadLabel.string=r.toFixed(2)+"%")}),30),this.decode(t,o,(function(){clearInterval(s)}));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),alert(e.t0),console.log("error =>",e.t0);case 24:case"end":return e.stop()}}),e,this,[[1,20]])})));return function(t,n,o,i){return e.apply(this,arguments)}}(),l.decode=function(e,t,n){void 0===n&&(n=null),null!=window.Worker?this.workerDecode(e,t,n):this.autoDecode(e,t,n)},l.autoDecode=function(e,t,n){void 0===n&&(n=null);var o=new window.LZMA.iStream(e.result),i=new window.LZMA.oStream;console.time("decompressFile"),window.LZMA.decompressFile(o,i),console.timeEnd("decompressFile"),console.time("JSON.parse"),b.replay=JSON.parse(i.toString()),console.timeEnd("JSON.parse"),n&&n(),p.loadScene("Game")},l.workerDecode=function(e,t,n){void 0===n&&(n=null);try{var o=this,i=new Worker("./libs/worker.js");i.onerror=function(){o.autoDecode(e,t,n)},i.postMessage(e.result),i.onmessage=function(i){try{b.replay=i.data,t.remove(),p.loadScene("Game"),n&&n()}catch(i){o.autoDecode(e,t,n)}}}catch(o){this.autoDecode(e,t,n)}},l.onFileClick=function(){this.file&&this.file.click()},l.onDemoClick=function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://raw.githubusercontent.com/NeuralMMO/client/2.0/replays/replay_seed_5249.json");case 3:return t=e.sent,e.next=6,t.text();case 6:n=e.sent,o=new File([n],"serverFile.json",{type:"application/json"}),(i=new DataTransfer).items.add(o),this.file.files=i.files,a=new FileReader,!0,this.handleFileRead(a,true,o,this),this.file.dispatchEvent(new Event("change")),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),l.GetQueryString=function(e){var t=e.toString().split("?")[1];if(void 0===t)return"LOCAL";var n=(t=t.replace(/%2F/g,"/").replace(/%3A/g,":")).split("=")[1].split("/"),o=n.pop();return"kywch.github.io"==n[2]&&"lzma"==o.split(".")[1]?decodeURI(t.split("=")[1]):"ERROR"},t}(f)).prototype,"uploadLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(D.prototype,"loadingLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(D.prototype,"btnUpload",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(D.prototype,"btnDemo",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=D))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/SkillGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Profession.ts","./Component.ts"],(function(l){"use strict";var e,i,t,s,n,r;return{setters:[function(l){e=l.inheritsLoose,i=l.defineProperty,t=l.assertThisInitialized},function(l){s=l.cclegacy},function(l){n=l.Profession},function(l){r=l.Component}],execute:function(){s._RF.push({},"0bc8cboo/VOaaf+iuQf3u/O","SkillGroup",void 0);var o=l("Skill",function(l){function s(){for(var e,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n))||this,i(t(e),"level",0),i(t(e),"exp",0),e}e(s,l);var n=s.prototype;return n.UpdateSkill=function(l){this.level=l.level,this.exp=l.exp},n.compare=function(l){return l.level<this.level||l.level==this.level&&l.exp<this.exp?1:l.level==this.level&&l.exp==this.exp?0:-1},s}(r));l("SkillGroup",function(l){function s(){var e;return e=l.call(this)||this,i(t(e),"skills",void 0),i(t(e),"level",void 0),e.skills={},e.level=0,e}e(s,l);var r=s.prototype;return r.AddSkill=function(l){return null==this.skills[l]&&(this.skills[l]=new o),this.skills[l]},r.UpdateSkill=function(l,e){if(null!=this.skills[l])return this.skills[l].level=e.level,this.skills[l].exp=e.exp,this.skills[l]},r.UpdateSkills=function(l){for(var e in l)this.UpdateSkill(e,l[e]);var i=[];for(var t in this.skills)null==l[t]&&i.push(t);for(var s=0;s<i.length;s++)delete this.skills[i[s]]},r.UpdateUI=function(){},r.GetSkill=function(l){return this.skills&&this.skills[l]},r.getProfession=function(){return n.None},s}(r));s._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,a,n,t,l,S;return{setters:[function(e){i=e.createClass,a=e.defineProperty},function(e){n=e.cclegacy,t=e.math,l=e.Size,S=e.Rect}],execute:function(){n._RF.push({},"1f5d7m3QSREyJJw8ZaMbYzo","GlobalConfig",void 0);var o=e("GlobalConfig",function(){function e(){}return i(e,null,[{key:"TickFrac",get:function(){return e.StepTick/e.SpeedRate}}]),e}());a(o,"MAX_SPEED",8),a(o,"MIN_SPEED",1),a(o,"BASE_FLY_TIME",.4),a(o,"BASE_DMG_TIME",1.2),a(o,"RADIAN",t.toRadian(30)),a(o,"BORDER_SIZE",16),a(o,"TILE_SIZE_25D",new l(256,285)),a(o,"TILE_SIZE",new l(128,128)),a(o,"MapSize",160),a(o,"MapPixelSize",new l(128,128)),a(o,"TilePixelSize",new l(128,128)),a(o,"RealMapPixelSize",new l(128,128)),a(o,"Border",16),a(o,"BorderWidth",o.TilePixelSize.x*o.BORDER_SIZE),a(o,"LastDataMap",{}),a(o,"replay",void 0),a(o,"step",0),a(o,"SpeedRate",1),a(o,"SpeedRates",[.25,.5,1,2,4,8]),a(o,"Scales",[.04,.1,.4,.8]),a(o,"ScaleIndex",2),a(o,"CurScale",.4),a(o,"LastScale",.4),a(o,"MinScale",.04),a(o,"MaxScale",.8),a(o,"ScaleStep",.1),a(o,"StepTick",600),a(o,"Use25D",!0),a(o,"RhombusSize",new l(o.TilePixelSize.x,o.TilePixelSize.x*Math.sin(o.RADIAN))),a(o,"HRhombusSize",new l(o.RhombusSize.x/2,o.RhombusSize.y/2)),a(o,"Pause",!0),a(o,"PosZIndexMap",{}),a(o,"isEnd",!1),a(o,"Viewport",new S),a(o,"CanvasNode",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Metrics.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var t,i,n,r,a,o;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,n=e.defineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy},function(e){o=e.Component}],execute:function(){a._RF.push({},"21e425rQgNKYKSiB8R3Qjgs","Metrics",void 0);var s=e("Metrics",function(e){function a(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(r(t),"PlayerDefeats",0),n(r(t),"Gold",0),n(r(t),"TimeAlive",0),n(r(t),"DamageTaken",void 0),t}return t(a,e),a.prototype.bindData=function(e){this.PlayerDefeats=e.PlayerDefeats,this.Gold=e.Gold,this.TimeAlive=e.TimeAlive,this.DamageTaken=e.DamageTaken},a.calculateScore=function(e,t,i,n){var r=0;e>=6?r+=a.high:e>=3?r+=a.mid:e>=1&&(r+=a.low);var o=t;o>=20?r+=a.high:o>=10?r+=a.mid:o>=1&&(r+=a.low);var s=i;s>=127?r+=a.high:s>=64?r+=a.mid:s>=32&&(r+=a.low);var l=n;return l>=50?r+=a.high:l>=35?r+=a.mid:l>=20&&(r+=a.low),r},i(a,[{key:"total",get:function(){return 0}}]),a}(o));n(s,"high",21),n(s,"mid",10),n(s,"low",4),a._RF.pop()}}}));

System.register("chunks:///_virtual/DropdownItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,o,l,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label,c=e.Sprite,u=e.Toggle,p=e.Component}],execute:function(){var s,b,f,g,m,y,d,h,w,v,z;o._RF.push({},"273f2S8stlFl5+KrKwHBAbR","DropdownItem",void 0);var D=l.ccclass,k=l.property;e("default",(s=D("DropdownItem"),b=k(a),f=k(c),g=k(u),m=k(c),s((h=r((d=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,i(n(r),"label",h,n(r)),i(n(r),"sprite",w,n(r)),i(n(r),"toggle",v,n(r)),i(n(r),"checkmark",z,n(r)),r}return t(r,e),r}(p)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=r(d.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=r(d.prototype,"toggle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),z=r(d.prototype,"checkmark",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Profession.ts",["cc"],(function(r){"use strict";var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){var o;r("Profession",void 0),e._RF.push({},"28d9848YXFDJaUimz213KfQ","Profession",void 0),function(r){r[r.None=0]="None",r[r.Archer=1]="Archer",r[r.Mage=2]="Mage",r[r.Warrior=3]="Warrior"}(o||(o=r("Profession",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/Inventory.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts","./ItemComponent.ts","./Equipment.ts"],(function(t){"use strict";var e,n,i,o,s,r,u;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy},function(t){s=t.Component},function(t){r=t.ItemComponent},function(t){u=t.Equipment}],execute:function(){o._RF.push({},"28e20nKKKdAvKahz3zCGmU8","Inventory",void 0);t("Inventory",function(t){function o(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(i(e),"items",[]),n(i(e),"equipment",void 0),e}return e(o,t),o.prototype.Update=function(t){this.items=[],null==this.equipment&&(this.equipment=new u),this.equipment.Update(t.equipment);for(var e=0;e<t.items.length;e++){var n=t.items[e],i=new r;this.items.push(i),i.Update(n)}},o}(s));o._RF.pop()}}}));

System.register("chunks:///_virtual/Demo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,l,s,n,h,r,a,c,g,y,p,f,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.defineProperty,l=t.assertThisInitialized,s=t.initializerDefineProperty},function(t){n=t.cclegacy,h=t._decorator,r=t.Node,a=t.Graphics,c=t.Canvas,g=t.Color,y=t.Vec3,p=t.UITransform,f=t.Vec2,u=t.Component}],execute:function(){var x,w,d,m,v,b,T,C,D;n._RF.push({},"29d76fwmctGsapeWFvsS9kE","Demo",void 0);var R=h.ccclass,z=h.property;t("Demo",(x=R("Demo"),w=z(r),d=z(a),m=z(c),x((T=i((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,o(l(i),"color",(new g).fromHEX("#0d430580")),o(l(i),"left",void 0),o(l(i),"right",void 0),o(l(i),"top",void 0),o(l(i),"bottom",void 0),s(l(i),"testNode",T,l(i)),s(l(i),"gl",C,l(i)),s(l(i),"cav",D,l(i)),i}e(i,t);var n=i.prototype;return n.start=function(){this.drawRect();var t=new y(0,0,0);this.node.getComponent(p);var i=this.cav;null!=i?(t=this.testNode.getComponent(p).convertToWorldSpaceAR(t),t=i.getComponent(p).convertToNodeSpaceAR(t),console.log(t)):console.log("Canvas = null")},n.draw=function(t,i,e,o,l,s,n,h){this.gl.moveTo(t,i),this.gl.lineTo(e,o),this.gl.lineTo(l,s),this.gl.lineTo(n,h)},n.draw4Rect=function(){var t=new f(256,128);this.left=new f(6*-t.x/2,0),this.right=new f(6*t.x/2,0),this.top=new f(0,6*t.y/2),this.bottom=new f(0,6*-t.y/2);this.gl.lineWidth=1,this.gl.fillColor=this.color;var i=0,e=0,o=0,l=0,s=0,n=0,h=0,r=0;i=this.left.x,e=0,o=this.left.x+256,l=128,s=0,n=this.bottom.y+256,h=-256,r=this.bottom.y+128,this.draw(i,e,o,l,s,n,h,r),i=0,e=this.top.y,o=256,l=this.top.y-128,s=this.left.x+512,n=0,h=this.left.x+256,r=128,this.draw(i,e,o,l,s,n,h,r),i=this.right.x,e=0,o=this.right.x-256,l=-128,s=0,n=this.top.y-256,h=256,r=this.top.y-128,this.draw(i,e,o,l,s,n,h,r),i=0,e=this.bottom.y,o=-256,l=this.bottom.y+128,s=this.right.x-512,n=0,h=this.right.x-256,r=-128,this.draw(i,e,o,l,s,n,h,r),this.gl.close(),this.gl.fill()},n.drawRect=function(){var t=new f(256,128),i=4*t.x,e=4*t.y;this.left=new f(-i/2-t.x/2,0),this.right=new f(i/2+t.x/2,0),this.top=new f(0,e/2+t.y/2),this.bottom=new f(0,-e/2-t.y/2);var o=1*t.x/2,l=1*t.y/2,s=this.left,n=new f(this.left.x+o,this.left.y+l),h=new f(this.bottom.x,this.bottom.y+2*l),r=new f(this.right.x-2*o,this.right.y),a=new f(this.top.x,this.top.y-2*l),c=new f(this.left.x+2*o,this.left.y),g=n,y=this.top,p=this.right,u=this.bottom,x=this.left;this.gl.lineWidth=1,this.gl.fillColor=this.color,this.gl.moveTo(s.x,s.y),this.gl.lineTo(n.x,n.y),this.gl.lineTo(h.x,h.y),this.gl.lineTo(r.x,r.y),this.gl.lineTo(a.x,a.y),this.gl.lineTo(c.x,c.y),this.gl.lineTo(g.x,g.y),this.gl.lineTo(y.x,y.y),this.gl.lineTo(p.x,p.y),this.gl.lineTo(u.x,u.y),this.gl.lineTo(x.x,x.y),this.gl.close(),this.gl.fill()},i}(u)).prototype,"testNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(b.prototype,"gl",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(b.prototype,"cav",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIStatisticalData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIStatisticalItem.ts","./StatisticalManager.ts"],(function(t){"use strict";var e,i,a,n,r,s,o,l,c,u,h,p,f;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,l=t.Prefab,c=t.Node,u=t.instantiate,h=t.Component},function(t){p=t.UIStatisticalItem},function(t){f=t.StatisticalManager}],execute:function(){var m,d,b,g,D,y,S,U,I,v,P;s._RF.push({},"2b56465oTtP06rxKIEXjnbU","UIStatisticalData",void 0);var _=o.ccclass,T=o.property;t("UIStatisticalData",(m=_("UIStatisticalData"),d=T(l),b=T([p]),g=T(c),m((P=v=function(t){function i(){for(var i,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,n(r(i),"itemPrefab",S,r(i)),n(r(i),"items",U,r(i)),n(r(i),"content",I,r(i)),e(r(i),"_lastUpdateTime",0),i}a(i,t);var s=i.prototype;return s.start=function(){this.BindStatisticalData()},s.BindStatisticalData=function(){for(var t=f.instance.GetItems(),e=0;e<t.length;e++)if(e<this.items.length)this.items[e].bindData(t[e]);else{var i=u(this.itemPrefab);i.getComponent(p).bindData(t[e]),this.items.push(i.getComponent(p)),this.content.addChild(i)}t.length<this.items.length&&this.items.slice(t.length,this.items.length-t.length).forEach((function(t){t.node.destroy()}))},s.update=function(t){this.node.active&&Date.now()-this._lastUpdateTime>i.UPDATE_DELAY&&(this._lastUpdateTime=Date.now(),this.BindStatisticalData())},i}(h),e(v,"UPDATE_DELAY",1e3),S=i((y=P).prototype,"itemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(y.prototype,"items",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=i(y.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=y))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/Component.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"2bf2cYuQ5VIr5FDlvU5xVq/","Component",void 0);n("Component",function(){function n(){}var t=n.prototype;return t.Unpack=function(n,t){return t[n]},t.UnpackList=function(n,t){return null},t.Update=function(n){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceTileType.ts",["cc"],(function(e){"use strict";var r,t;return{setters:[function(e){r=e.cclegacy,t=e.Enum}],execute:function(){var s;e("ResourceTileType",void 0),r._RF.push({},"30062OtKUZGs5Y3Ixsy6wHL","ResourceTileType",void 0),function(e){e[e.None=0]="None",e[e.Forest=4]="Forest",e[e.Stone=5]="Stone",e[e.Slag=6]="Slag",e[e.Ore=7]="Ore",e[e.Stump=8]="Stump",e[e.Tree=9]="Tree",e[e.Fragment=10]="Fragment",e[e.Crystal=11]="Crystal",e[e.Weeds=12]="Weeds",e[e.Herb=13]="Herb",e[e.Ocean=14]="Ocean",e[e.Fish=15]="Fish"}(s||(s=e("ResourceTileType",{}))),t(s),r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillType.ts",["cc"],(function(e){"use strict";var i,t;return{setters:[function(e){i=e.cclegacy,t=e.Enum}],execute:function(){var n,o;e({SkillDir:void 0,SkillType:void 0}),i._RF.push({},"313feVyaStA3oiYVC5vufqG","SkillType",void 0),function(e){e[e.food=0]="food",e[e.melee=1]="melee",e[e.range=2]="range",e[e.carving=3]="carving",e[e.mage=4]="mage",e[e.fishing=5]="fishing",e[e.alchemy=6]="alchemy",e[e.herbalism=7]="herbalism",e[e.water=8]="water",e[e.prospecting=9]="prospecting"}(n||(n=e("SkillType",{}))),t(n),function(e){e[e.RightUp=1]="RightUp",e[e.Right=2]="Right",e[e.RightDown=3]="RightDown",e[e.Down=4]="Down",e[e.LeftDown=5]="LeftDown",e[e.Left=6]="Left",e[e.LeftUp=7]="LeftUp",e[e.Up=8]="Up"}(o||(o=e("SkillDir",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAgentStatus.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./UISkillPanel.ts","./UIPropertyPanel.ts","./UIItemPanel.ts","./UIInfo.ts"],(function(t){"use strict";var e,n,i,a,l,o,r,s,u,p,y,c,h,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,l=t.defineProperty},function(t){o=t.cclegacy,r=t._decorator,s=t.Label,u=t.Component},function(t){p=t.EventManager,y=t.BattleEvent},function(t){c=t.UISkillPanel},function(t){h=t.UIPropertyPanel},function(t){f=t.UIItemPanel},function(t){d=t.UIInfo}],execute:function(){var U,m,P,D,I,v,_,b,g,w,k,E,A;o._RF.push({},"3989dyB6wpKCbyNV4DvyJcA","UIAgentStatus",void 0);var z=r.ccclass,S=r.property;t("UIAgentStatus",(U=z("UIAgentStatus"),m=S(s),P=S({type:h}),D=S({type:c}),I=S({type:f}),v=S({type:d}),U((g=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(a(e),"agentName",g,a(e)),i(a(e),"propertyPanel",w,a(e)),i(a(e),"skillPanel",k,a(e)),i(a(e),"itemPanel",E,a(e)),i(a(e),"infoPanel",A,a(e)),l(a(e),"_entityData",void 0),l(a(e),"_delay",50),l(a(e),"_lastUpdateTime",0),e}n(e,t);var o=e.prototype;return o.start=function(){p.view.on(y.RemoveEntity,this.OnRemoveEntity,this),p.view.on(y.LookAtEntity,this.onLookAt,this)},o.BindEntityData=function(t){this._entityData=t,null!=t&&(this.agentName.string=t.name),this.UpdateUI()},o.update=function(t){Date.now()-this._lastUpdateTime<this._delay||(this._lastUpdateTime=Date.now(),this.UpdateUI())},o.UpdateUI=function(){null==this._entityData?this.node.active=!1:(this.node.active=!0,this.itemPanel.UpdateData(this._entityData.inventory),this.propertyPanel.UpdateData(this._entityData.resources),this.skillPanel.UpdateData(this._entityData.skills),this.infoPanel.UpdateData(this._entityData.metrics))},o.OnRemoveEntity=function(t){t&&t.data==this._entityData&&(this._entityData=null,this.UpdateUI())},o.onLookAt=function(t){null!=t&&null!=t.entity?this.BindEntityData(t.entity.data):this.BindEntityData(null)},e}(u)).prototype,"agentName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(b.prototype,"propertyPanel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(b.prototype,"skillPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(b.prototype,"itemPanel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(b.prototype,"infoPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=b))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIMarketItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIItem.ts","./UIMarketLevelPrice.ts"],(function(e){"use strict";var i,t,r,n,a,l,o,c,p,s,u,b,f,h,m;return{setters:[function(e){i=e.defineProperty,t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,c=e.Node,p=e.Label,s=e.Sprite,u=e.Prefab,b=e.instantiate,f=e.Component},function(e){h=e.ItemName},function(e){m=e.UIMarketLevelPrice}],execute:function(){var v,y,d,g,I,D,M,P,z,w,k,U,L,_,N,A,C,F,R;l._RF.push({},"3ba10YoUphPCo2LzMpZPMbw","UIMarketItem",void 0);var S=o.ccclass,X=o.property;e("MarketItemData",(function(){i(this,"name",void 0),i(this,"priceDic",void 0)})),e("UIMarketItem",(v=S("UIMarketItem"),y=X({type:h}),d=X(c),g=X(p),I=X(s),D=X(p),M=X(p),P=X(u),v((R=F=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(a(t),"itemName",k,a(t)),n(a(t),"contents",U,a(t)),n(a(t),"title",L,a(t)),n(a(t),"icon",_,a(t)),n(a(t),"level",N,a(t)),n(a(t),"price",A,a(t)),n(a(t),"pricePrefab",C,a(t)),i(a(t),"prices",void 0),i(a(t),"priceDic",void 0),t}r(t,e);var l=t.prototype;return l.start=function(){},l.bindData=function(e){if(null==this.prices||0==this.prices.length){this.prices=[];for(var i=0;i<t.MAX;i++){var r=b(this.pricePrefab),n=r.getComponent(m);this.prices.push(n),n.bindData(i+1,0),r.setParent(this.contents)}}if(null==e)for(var a=0;a<this.prices.length;a++)this.prices[a].bindData(a+1,0);else{this.title.string=e.name;for(var l=0;l<this.prices.length;l++){var o=""+(l+1),c=l+1;null!=e.priceDic[o]?this.prices[l].bindData(c,+e.priceDic[o]):this.prices[l].bindData(c,0)}}},t}(f),i(F,"MAX",10),k=t((w=R).prototype,"itemName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(w.prototype,"contents",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(w.prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(w.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(w.prototype,"level",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(w.prototype,"price",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(w.prototype,"pricePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=w))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/ItemComponent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var t,n,a,i,l;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy},function(e){l=e.Component}],execute:function(){i._RF.push({},"3d5b68DK5JADpTuqgmwgMDH","ItemComponent",void 0);e("ItemComponent",function(e){function i(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(a(t),"color",void 0),n(a(t),"item",void 0),n(a(t),"level",void 0),n(a(t),"capacity",void 0),n(a(t),"quantity",void 0),n(a(t),"melee_attack",void 0),n(a(t),"range_attack",void 0),n(a(t),"mage_attack",void 0),n(a(t),"melee_defense",void 0),n(a(t),"range_defense",void 0),n(a(t),"mage_defense",void 0),n(a(t),"health_restore",void 0),n(a(t),"resource_restore",void 0),n(a(t),"price",void 0),t}return t(i,e),i.prototype.Update=function(e){null!=e.color&&(this.color=e.color),null!=e.item&&(this.item=e.item),null!=e.level&&(this.level=e.level),null!=e.capacity&&(this.capacity=e.capacity),null!=e.quantity&&(this.quantity=e.quantity),null!=e.melee_attack&&(this.melee_attack=e.melee_attack),null!=e.range_attack&&(this.range_attack=e.range_attack),null!=e.mage_attack&&(this.mage_attack=e.mage_attack),null!=e.melee_defense&&(this.melee_defense=e.melee_defense),null!=e.range_defense&&(this.range_defense=e.range_defense),null!=e.mage_defense&&(this.mage_defense=e.mage_defense),null!=e.health_restore&&(this.health_restore=e.health_restore),null!=e.resource_restore&&(this.resource_restore=e.resource_restore),null!=e.price&&(this.price=e.price)},i}(l));i._RF.pop()}}}));

System.register("chunks:///_virtual/TilePrefabMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceTileType.ts","./TileType.ts"],(function(e){"use strict";var i,r,t,n,o,a,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){t=e.cclegacy,n=e._decorator,o=e.Prefab},function(e){a=e.ResourceTileType},function(e){l=e.TileType}],execute:function(){var p,c,u,s,f,y,b,T,h;t._RF.push({},"3fc7dw1tKFJOopNa2N9KxQC","TilePrefabMap",void 0);var P=n.ccclass,g=n.property;e("TilePrefabMap",(p=P("TilePrefabMap"),c=g({type:l}),u=g({type:a}),s=g(o),p((b=i((y=function(){r(this,"tileType",b,this),r(this,"resourceType",T,this),r(this,"prefab",h,this)}).prototype,"tileType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.None}}),T=i(y.prototype,"resourceType",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.None}}),h=i(y.prototype,"prefab",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));t._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamOptionData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropdownOptionData.ts"],(function(t){"use strict";var i,n,e,a,o;return{setters:[function(t){i=t.inheritsLoose,n=t.defineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy},function(t){o=t.default}],execute:function(){a._RF.push({},"3ff56U3uslPvKbhHHgZqtvV","UITeamOptionData",void 0);t("UITeamOptionData",function(t){function a(i){var a;return a=t.call(this,i.label,null,i.alwaysBottom)||this,n(e(a),"invalid",!1),i.invalid&&(a.invalid=i.invalid),a}return i(a,t),a}(o));a._RF.pop()}}}));

System.register("chunks:///_virtual/Environment25D.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceTileType.ts","./GlobalConfig.ts","./Utils.ts","./ZIndex.ts","./TileType.ts","./TilePrefabMap.ts","./TileView.ts","./Environment.ts"],(function(e){"use strict";var i,t,r,n,s,o,a,l,u,c,p,f,h,b,y,v,T,P,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.defineProperty},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,u=e.Size,c=e.instantiate},function(e){p=e.ResourceTileType},function(e){f=e.GlobalConfig},function(e){h=e.Utils},function(e){b=e.ZIndex},function(e){y=e.TileType},function(e){v=e.TilePrefabMap},function(e){T=e.TileView},function(e){P=e.Tile,g=e.Environment}],execute:function(){var R,m,d,S,I,M,z,x,E;o._RF.push({},"40e76PgGK1CwIBCrjokEkGV","Environment25D",void 0);var w=a.ccclass,_=a.property;e("Environment25D",(R=w("Environment25D"),m=_(l),d=_(l),S=_({type:[v]}),R((z=i((M=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(n(i),"entityLayer",z,n(i)),r(n(i),"treeLayer",x,n(i)),r(n(i),"prefabs",E,n(i)),s(n(i),"tilePrefabMap",{}),s(n(i),"resPrefabMap",{}),s(n(i),"resources",void 0),s(n(i),"inactiveResources",void 0),s(n(i),"posZIndexMap",void 0),i}t(i,e);var o=i.prototype;return o.start=function(){},o.Init=function(e){this.InitPrefabs(),this.InitConfig(e),this.InitTiles(e.map),window.env=this},o.InitPrefabs=function(){if(this.prefabs.length>0)for(var e=0;e<this.prefabs.length;e++){var i=this.prefabs[e];if(i.resourceType!=p.None){var t=i.resourceType;null==this.resPrefabMap[t]?this.resPrefabMap[t]=i:console.log("Init  prefabs Error ,Key "+t+" is already in map")}else if(i.tileType!=y.None){var r=i.tileType;null==this.tilePrefabMap[r]?this.tilePrefabMap[r]=i:console.log("Init  prefabs Error ,Key "+r+" is already in map")}}},o.InitConfig=function(e){this.tileNodes={},this.tiles={},this.resources={},this.inactiveResources={},f.TilePixelSize=f.TILE_SIZE_25D;var i=e.map.length;f.MapSize=i,f.RhombusSize=new u(f.TilePixelSize.x,Math.round(f.TilePixelSize.x*Math.sin(f.RADIAN))),f.HRhombusSize=new u(f.RhombusSize.x/2,f.RhombusSize.y/2),f.MapPixelSize=new u(i*f.HRhombusSize.x*2,i*f.HRhombusSize.y*2),f.RealMapPixelSize=new u((i-2*f.BORDER_SIZE)*f.RhombusSize.x,(i-2*f.BORDER_SIZE)*f.RhombusSize.y);var t=f.Scales[f.ScaleIndex];f.CurScale=t,f.LastScale=t},o.InitTiles=function(e){for(var i=e.length,t=0;t<i;t++)for(var r=0;r<i;r++){var n=t+"_"+r,s=e[t][r];if(s!=y.None){this.tiles[n]=new P(t,r,s);var o=this.resPrefabMap[s];if(null==o&&(o=this.tilePrefabMap[s]),null==o&&console.log("prefabData == null tileType ",s),o.tileType!=y.None){null==this.tilePrefabMap[o.tileType]&&console.log("prefab == null tileType ",o.tileType);var a=this.tilePrefabMap[o.tileType].prefab,l=c(a);l.name="tile_"+n,this.tileNodes[t+"_"+r]=l,l.position=h.GetTilePos(t,r),l.setParent(this.terrainLayer)}if(o.resourceType!=p.None){null==this.resPrefabMap[o.resourceType]&&console.log("prefab == null resourceType ",o.resourceType);var u=this.resPrefabMap[o.resourceType].prefab,f=c(u),v=f.getComponent(T),g=f.getComponent(b);g.r=t,g.c=r,f.position=h.RCToTileOrigin(t,r),this.resources[n]=v,f.setParent(this.entityLayer)}}}},o.updateInactiveResources=function(e){var i=[];if(null!=e)for(var t=0;t<e.length;t++)i.push(e[t][0]+"_"+e[t][1]);var r=[];for(var n in this.inactiveResources)-1==i.indexOf(n)&&r.push(n);for(var s=0;s<r.length;s++)this.inactiveResources[r[s]].active=!0,delete this.inactiveResources[r[s]];for(var o=0;o<i.length;o++){var a=i[o];null!=this.resources[i[o]]&&(this.resources[i[o]].active=!1,this.inactiveResources[a]=this.resources[i[o]])}},i}(g)).prototype,"entityLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(M.prototype,"treeLayer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(M.prototype,"prefabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=M))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/DeathFogCol.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./GlobalConfig.ts"],(function(t){"use strict";var i,e,l,o,s,h,n,g,r,a,c,p,T,u;return{setters:[function(t){i=t.defineProperty,e=t.applyDecoratedDescriptor,l=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){h=t.cclegacy,n=t._decorator,g=t.Graphics,r=t.Color,a=t.Vec2,c=t.Component},function(t){p=t.EventManager,T=t.BattleEvent},function(t){u=t.GlobalConfig}],execute:function(){var y,f,m,x,S,v,R;h._RF.push({},"4af2eMlj7xNW5FOVClsvwck","DeathFogCol",void 0);var E=n.ccclass,b=n.property;t("DeathFogCol",(y=E("DeathFogCol"),f=b(g),y((R=v=function(t){function e(){for(var e,l=arguments.length,h=new Array(l),n=0;n<l;n++)h[n]=arguments[n];return e=t.call.apply(t,[this].concat(h))||this,o(s(e),"gl",S,s(e)),i(s(e),"curReplayStep",0),i(s(e),"curFogStep",0),i(s(e),"isLast",void 0),i(s(e),"a",0),i(s(e),"left",void 0),i(s(e),"top",void 0),i(s(e),"right",void 0),i(s(e),"bottom",void 0),i(s(e),"color",(new r).fromHEX("#0d430580")),i(s(e),"maxStep",void 0),e}l(e,t);var h=e.prototype;return h.start=function(){this.left=new a,this.top=new a,this.right=new a,this.bottom=new a;var t=u.MapSize-2*u.BORDER_SIZE,i=t*u.HRhombusSize.x*2,l=t*u.HRhombusSize.y*2;this.left.set(-i/2-u.HRhombusSize.x,0),this.top.set(0,l/2+u.HRhombusSize.y),this.right.set(i/2+u.HRhombusSize.x,0),this.bottom.set(0,-l/2-u.HRhombusSize.y),this.maxStep=(u.MapSize-2*u.BORDER_SIZE-2*e.PLAYER_DEATH_FOG_FINAL_SIZE)/2,p.view.on(T.StepChange,this.onStepChange,this)},h.onStepChange=function(t){if(this.curReplayStep!=t)if(this.curReplayStep=t,this.curReplayStep<e.PLAYER_DEATH_FOG)this.gl.clear();else{var i=Math.floor((this.curReplayStep-e.PLAYER_DEATH_FOG+1)*e.PLAYER_DEATH_FOG_SPEED);i=Math.min(this.maxStep,i),this.curFogStep!=i&&(this.curFogStep=i,this.drawRect2(this.curFogStep,this.color))}},h.update=function(){},h.draw=function(t,i,e,l,o,s){this.gl.clear(),this.gl.lineWidth=1,this.gl.fillColor=s;var h=o,n=o/2;this.gl.moveTo(t-h,0),this.gl.lineTo(t,n),this.gl.lineTo(h,l),this.gl.lineTo(0,l-n),this.gl.moveTo(t-h,0),this.gl.lineTo(0,e+n),this.gl.lineTo(h,e),this.gl.lineTo(t,-n),this.gl.moveTo(0,e+n),this.gl.lineTo(i+h,0),this.gl.lineTo(i,-n),this.gl.lineTo(-h,e),this.gl.moveTo(i+h,0),this.gl.lineTo(0,l-n),this.gl.lineTo(-h,l),this.gl.lineTo(i,n),this.gl.close(),this.gl.fill()},h.drawRect=function(t,i){this.gl.clear(),this.gl.lineWidth=4,this.gl.fillColor=i;var e=u.HRhombusSize.x,l=u.HRhombusSize.y;this.gl.moveTo(this.left.x,this.left.y),this.gl.lineTo(this.left.x+t*e,t*l),this.gl.lineTo(0,this.bottom.y+t*l*2),this.gl.lineTo(-t*e,this.bottom.y+t*l),this.gl.moveTo(this.top.x,this.top.y),this.gl.lineTo(t*e,this.top.y-t*l),this.gl.lineTo(this.left.x+t*e*2,0),this.gl.lineTo(this.left.x+t*e,t*l),this.gl.moveTo(this.right.x,this.right.y),this.gl.lineTo(this.right.x-t*e,-t*l),this.gl.lineTo(0,this.top.y-2*t*l),this.gl.lineTo(t*e,this.top.y-t*l),this.gl.moveTo(this.bottom.x,this.bottom.y),this.gl.lineTo(-t*e,this.bottom.y+t*l),this.gl.lineTo(this.right.x-2*t*e,0),this.gl.lineTo(this.right.x-t*e,-t*l),this.gl.close(),this.gl.fill()},h.drawRect2=function(t,i){var e=t*u.HRhombusSize.x,l=t*u.HRhombusSize.y,o=this.left,s=new a(this.left.x+e,this.left.y+l),h=new a(this.bottom.x,this.bottom.y+2*l),n=new a(this.right.x-2*e,this.right.y),g=new a(this.top.x,this.top.y-2*l),r=new a(this.left.x+2*e,this.left.y),c=s,p=this.top,T=this.right,y=this.bottom,f=this.left;this.gl.clear(),this.gl.lineWidth=1,this.gl.fillColor=this.color,this.gl.moveTo(o.x,o.y),this.gl.lineTo(s.x,s.y),this.gl.lineTo(h.x,h.y),this.gl.lineTo(n.x,n.y),this.gl.lineTo(g.x,g.y),this.gl.lineTo(r.x,r.y),this.gl.lineTo(c.x,c.y),this.gl.lineTo(p.x,p.y),this.gl.lineTo(T.x,T.y),this.gl.lineTo(y.x,y.y),this.gl.lineTo(f.x,f.y),this.gl.close(),this.gl.fill()},e}(c),i(v,"PLAYER_DEATH_FOG",240),i(v,"PLAYER_DEATH_FOG_FINAL_SIZE",15),i(v,"PLAYER_DEATH_FOG_SPEED",1/16),S=e((x=R).prototype,"gl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=x))||m));h._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerResources.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceGroup.ts"],(function(e){"use strict";var o,r,t,s,u;return{setters:[function(e){o=e.inheritsLoose,r=e.defineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy},function(e){u=e.ResourceGroup}],execute:function(){s._RF.push({},"4ff7fhdGQJJ9oHq/AcvSyyl","PlayerResources",void 0);e("PlayerResources",function(e){function s(){var o;return o=e.call(this)||this,r(t(o),"health",void 0),r(t(o),"food",void 0),r(t(o),"water",void 0),o.health=o.AddResource("health"),o.food=o.AddResource("food"),o.water=o.AddResource("water"),o}return o(s,e),s}(u));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMarketLevelPrice.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,l,a,o,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Label,c=e.CCInteger,u=e.Component}],execute:function(){var s,p,v,f,b,y,g,h,m;l._RF.push({},"51813HHUB1Hnp6qyd/F5RXG","UIMarketLevelPrice",void 0);var L=a.ccclass,d=a.property;e("UIMarketLevelPrice",(s=L("UIMarketLevelPrice"),p=d(o),v=d(o),f=d(c),s((g=r((y=function(e){function r(){for(var r,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return r=e.call.apply(e,[this].concat(l))||this,i(n(r),"price",g,n(r)),i(n(r),"level",h,n(r)),i(n(r),"levelNum",m,n(r)),r}t(r,e);var l=r.prototype;return l.start=function(){},l.bindData=function(e,r){this.levelNum=e,this.level.string="Lv."+e,this.price.string=r<=0?"-":""+r},r}(u)).prototype,"price",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=r(y.prototype,"level",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=r(y.prototype,"levelNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=y))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerSkills.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Profession.ts","./SkillGroup.ts"],(function(e){"use strict";var i,l,n,r,o,s;return{setters:[function(e){i=e.inheritsLoose,l=e.defineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy},function(e){o=e.Profession},function(e){s=e.SkillGroup}],execute:function(){r._RF.push({},"51c98ksmGhE+YZKCj3/7SJp","PlayerSkills",void 0);e("PlayerSkills",function(e){function r(){var i;return i=e.call(this)||this,l(n(i),"melee",void 0),l(n(i),"range",void 0),l(n(i),"mage",void 0),l(n(i),"defense",void 0),l(n(i),"fishing",void 0),l(n(i),"hunting",void 0),l(n(i),"food",void 0),l(n(i),"carving",void 0),l(n(i),"alchemy",void 0),l(n(i),"herbalism",void 0),l(n(i),"water",void 0),l(n(i),"prospecting",void 0),i.skills={},i.melee=i.AddSkill("melee"),i.range=i.AddSkill("range"),i.mage=i.AddSkill("mage"),i.defense=i.AddSkill("defense"),i.fishing=i.AddSkill("fishing"),i.hunting=i.AddSkill("hunting"),i.food=i.AddSkill("food"),i.carving=i.AddSkill("carving"),i.alchemy=i.AddSkill("alchemy"),i.herbalism=i.AddSkill("herbalism"),i.water=i.AddSkill("water"),i.prospecting=i.AddSkill("prospecting"),i}return i(r,e),r.prototype.getProfession=function(){var e=this.melee,i=e.compare(this.range);return-1==i&&(e=this.range),-1==(i=e.compare(this.mage))&&(e=this.mage),0==i?o.None:e==this.melee?o.Warrior:e==this.range?o.Archer:e==this.mage?o.Mage:o.None},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/Status.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var t,n,r,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy},function(e){o=e.Component}],execute:function(){i._RF.push({},"55534ls3Y9L/IsimZ8yiRoI","Status",void 0);e("Status",function(e){function i(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"freeze",void 0),t}return t(i,e),i.prototype.Update=function(e){null!=e.freeze&&(this.freeze=e.freeze)},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/NpcData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Status.ts","./EntityData.ts","./History.ts","./NPCResources.ts","./NpcSKills.ts","./Inventory.ts"],(function(t){"use strict";var n,s,e,i,c,u,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy},function(t){e=t.Status},function(t){i=t.EntityData},function(t){c=t.History},function(t){u=t.NPCResources},function(t){o=t.NpcSkills},function(t){r=t.Inventory}],execute:function(){s._RF.push({},"61e4bM93u9MUrAYltPa+dXY","NpcData",void 0);t("NpcData",function(t){function s(n){var s;return(s=t.call(this)||this).status=new e,s.skills=new o,s.resources=new u,s.history=new c,s.inventory=new r,s.UpdateEntityData(n),s}return n(s,t),s}(i));s._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamScroll.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./EntityManager.ts","./UITeamOptionData.ts","./Dropdown.ts","./UITeamAgent.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,c,d,m,h,u,f,y,p,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.defineProperty},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,c=e.Node,d=e.Toggle,m=e.instantiate,h=e.Component},function(e){u=e.EventManager,f=e.BattleEvent},function(e){y=e.EntityManager},function(e){p=e.UITeamOptionData},function(e){v=e.Dropdown},function(e){g=e.UITeamAgent}],execute:function(){var I,T,b,w,E,S,D,O,C;r._RF.push({},"661b8IN1jRH4os+e9nJ4yfq","UITeamScroll",void 0);var A=s.ccclass,U=s.property;e("UITeamScroll",(I=A("UITeamScroll"),T=U(l),b=U(c),w=U(v),I((D=t((S=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(a(t),"itemPrefab",D,a(t)),n(a(t),"agentContent",O,a(t)),n(a(t),"teamDropdown",C,a(t)),o(a(t),"teams",void 0),o(a(t),"items",void 0),o(a(t),"curTeam",void 0),o(a(t),"curItem",void 0),o(a(t),"selectedIndex",-1),t}i(t,e);var r=t.prototype;return r.start=function(){this.items=[],this.teams=[];var e=new p({label:"Clear",invalid:!0,alwaysBottom:!0});this.teamDropdown.addOptionDatas([e],!1),u.view.on(f.AddTeam,this.AddTeam,this),u.view.on(f.RemoveEntity,this.OnRemoveEntity,this),u.view.on(f.SelectedEntity,this.OnSelectedEntity,this)},r.bindTeam=function(e,t){this.curTeam=e,this.selectedIndex=-1;for(var i=0;i<this.items.length;i++){var n=this.items[i];n.entity&&(n.entity.teamSelected=!1),n.entity&&(n.entity.selected=!1),n.node.off(d.EventType.TOGGLE,this.onAgentSelected,this),n.node.destroy()}if(this.items=[],this.selectedIndex=-1,this.curItem=null,null!=e)for(var a=y.instance.GetPlayersByTeam(e),o=0;o<a.length;o++){var r=a[o],s=m(this.itemPrefab),l=s.getComponent(g);this.items.push(l),l.BindEntity(r),l.node.on(d.EventType.TOGGLE,this.onAgentSelected,this),this.agentContent.addChild(s)}this.UpdateSelected()},r.UpdateSelected=function(){var e={entity:null!=this.curItem&&null!=this.curItem.entity&&this.curItem.entity,focus:!0};u.view.emit(f.LookAtEntity,e);var t=y.instance.GetPlayersByTeam(this.curTeam);if(null!=t&&0!=t.length)for(var i=0;i<t.length;i++)t[i].teamSelected=!0,t[i].selected=this.curItem&&this.curItem.entity==t[i]},r.AddTeam=function(e){if(-1==this.teams.indexOf(e)){this.teams.push(e);var t=new p({label:e});this.teamDropdown.addOptionDatas([t])}},r.OnTeamDropChanged=function(e){e.invalid?this.bindTeam(void 0):this.bindTeam(e.label)},r.onAgentSelected=function(e){var t=e.node.parent;null!=this.curItem&&this.curItem.node!=t&&(this.curItem.toggle&&(this.curItem.toggle.isChecked=!1),this.curItem=null);for(var i=0;i<t.children.length;i++)if(t.children[i]==e.node){this.curItem=e.node.getComponent(g),this.selectedIndex=i-1;break}this.UpdateSelected()},r.OnRemoveEntity=function(e){null!=e&&null!=this.curItem&&this.curItem.entity==e&&this.bindTeam(this.curTeam)},r.OnSelectedEntity=function(e){var t=e.teamName,i=y.instance.GetPlayersByTeam(t);this.bindTeam(t,i.indexOf(e)),null!=this.curItem&&this.curItem.entity!=e&&(this.curItem.toggle.isChecked=!1);for(var n=0;n<this.items.length;n++){var a=this.items[n];if(a.entity==e){a.toggle.isChecked=!0,this.selectedIndex=n;break}}u.view.emit(f.LookAtEntity,{entity:e,focus:!1}),this.teamDropdown.Select(t)},t}(h)).prototype,"itemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(S.prototype,"agentContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(S.prototype,"teamDropdown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=S))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamAgent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(e){"use strict";var t,i,a,r,s,n,o,l,d,h,c,p,u,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.defineProperty,r=e.assertThisInitialized,s=e.initializerDefineProperty,n=e.createClass},function(e){o=e.cclegacy,l=e._decorator,d=e.Label,h=e.Node,c=e.ProgressBar,p=e.Toggle,u=e.Sprite,g=e.Component},function(e){b=e.EntityType}],execute:function(){var f,y,B,v,w,P,m,U,H,T,_,z,I,k,D,A,L;o._RF.push({},"6787dOiB/NAQrtoHnG1pKVw","UITeamAgent",void 0);var C=l.ccclass,M=l.property;e("UITeamAgent",(f=C("UITeamAgent"),y=M(d),B=M(h),v=M(c),w=M(c),P=M(c),m=M(p),U=M(u),f((_=t((T=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"index",void 0),s(r(t),"nameLabel",_,r(t)),s(r(t),"selectedView",z,r(t)),s(r(t),"HPBar",I,r(t)),s(r(t),"foodBar",k,r(t)),s(r(t),"waterBar",D,r(t)),s(r(t),"toggle",A,r(t)),s(r(t),"disableMask",L,r(t)),a(r(t),"_lastUpdateTime",0),a(r(t),"_updateStep",500),a(r(t),"entity",void 0),t}i(t,e);var o=t.prototype;return o.start=function(){},o.BindEntity=function(e){if(this.entity=e,null==this.entity)this.node.active=!1;else if(this.node.active=!0,this.nameLabel.string=""+this.entity.data.entID,this.toggle.interactable=!this.disable,this.toggle.isChecked=!1,e.type==b.NPC){var t=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:t.health.Percentage,this.foodBar.node.active=!1,this.waterBar.node.active=!1}else if(e.type==b.Player){var i=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:i.health.Percentage,this.foodBar.node.active=!0,this.foodBar.progress=this.disable?0:i.food.Percentage,this.waterBar.node.active=!0,this.waterBar.progress=this.disable?0:i.water.Percentage}},o.UpdateData=function(){null==this.entity&&(this.node.active=!1)},o.update=function(e){this.UpdateUI()},o.UpdateUI=function(){if(this.disableMask.node.active=this.disable,this.toggle.interactable=!this.disable,this.disable&&(this.toggle.isChecked=!1),this.disable&&(this.HPBar.progress=0,this.foodBar.progress=0,this.waterBar.progress=0),!(this.disable||Date.now()-this._lastUpdateTime<this._updateStep)){this._lastUpdateTime=Date.now();var e=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:e.health.Percentage,e.food&&(this.foodBar.progress=this.disable?0:e.food.Percentage),e.water&&(this.waterBar.progress=this.disable?0:e.water.Percentage)}},n(t,[{key:"disable",get:function(){return null==this.entity||this.entity.removed||!this.entity.data.alive}}]),t}(g)).prototype,"nameLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(T.prototype,"selectedView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(T.prototype,"HPBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(T.prototype,"foodBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(T.prototype,"waterBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(T.prototype,"toggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=t(T.prototype,"disableMask",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=T))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIAgenInfoPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,t,o,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,r=n.Component}],execute:function(){var c;t._RF.push({},"6edccHTCqRFM5aQks3ynqSw","UIAgenInfoPanel",void 0);var s=o.ccclass;o.property,n("UIAgenInfoPanel",s("UIAgenInfoPanel")(c=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.start=function(){},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/HeadInfo.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./DamegManager.ts","./Entity.ts"],(function(e){"use strict";var t,i,a,l,o,n,s,r,c,h,d,u,m,f,p,b,w,v,g,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized,o=e.defineProperty,n=e.createClass},function(e){s=e.cclegacy,r=e._decorator,c=e.Node,h=e.ProgressBar,d=e.Label,u=e.LabelOutline,m=e.Sprite,f=e.Color,p=e.Vec3,b=e.UITransform,w=e.Component},function(e){v=e.GlobalConfig},function(e){g=e.DamgeManager},function(e){y=e.EntityType}],execute:function(){var S,L,T,_,B,C,O,H,P,U,I,N,A,G,x,z,D,F,k,V,E,R,M;e("HeadVisableStatus",void 0),s._RF.push({},"76d05t3qm5B55OJGYCAVdBM","HeadInfo",void 0);var W,X=r.ccclass,j=r.property;!function(e){e[e.None=0]="None",e[e.TeamFlagOnly=1]="TeamFlagOnly",e[e.NameOnly=2]="NameOnly",e[e.NameAndStatus=3]="NameAndStatus",e[e.All=4]="All"}(W||(W=e("HeadVisableStatus",{})));e("HeadInfo",(S=X("HeadInfo"),L=j(c),T=j(h),_=j(h),B=j(h),C=j(d),O=j(d),H=j(u),P=j(d),U=j(m),I=j(m),S((G=t((A=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(l(t),"bars",G,l(t)),a(l(t),"HPBar",x,l(t)),a(l(t),"foodBar",z,l(t)),a(l(t),"waterBar",D,l(t)),a(l(t),"damageLabel",F,l(t)),a(l(t),"nameLabel",k,l(t)),a(l(t),"nameLabeOutline",V,l(t)),a(l(t),"shortName",E,l(t)),a(l(t),"teamTag",R,l(t)),a(l(t),"selectedFlag",M,l(t)),o(l(t),"damageTw",void 0),o(l(t),"_visableStatus",void 0),o(l(t),"entityType",void 0),o(l(t),"normalOutlineColor",f.BLACK),o(l(t),"selectOutlineColor",f.WHITE),o(l(t),"nameColor",void 0),o(l(t),"nameOutlineColor",""),o(l(t),"follow",void 0),o(l(t),"_lastScarleIndex",0),o(l(t),"_followSelected",!1),o(l(t),"_followTeamSelected",!1),o(l(t),"last",0),o(l(t),"gold",0),t}i(t,e);var s=t.prototype;return s.setFollow=function(e){this.follow=e},s.start=function(){this.entityType!=y.Player&&(this.foodBar.node.active=!1,this.waterBar.node.active=!1),this._lastScarleIndex=v.ScaleIndex,this._followSelected=!(!this.follow||!this.follow.selected),this._followTeamSelected=!(!this.follow||!this.follow.teamSelected),this.node.position=this.GetHeadPos(),this.UpdateActive(),this.nameLabel.color=(new f).fromHEX(this.nameColor)},s.setNameColor=function(e){this.nameColor=e,this.nameLabel&&(this.nameLabel.color=(new f).fromHEX(this.nameColor))},s.setNameOutlineColor=function(e){this.nameOutlineColor=e,this.nameLabeOutline&&(this.nameLabeOutline.color=(new f).fromHEX(this.nameOutlineColor))},s.update=function(e){0!=this.node.active&&null!=this.follow&&Date.now()-this.last>33.3&&(this.last=Date.now(),this.node.position=this.GetHeadPos(),this.lastScarleIndex=v.ScaleIndex,this.followSelected=!(!this.follow||!this.follow.selected),this.followTeamSelected=!(!this.follow||!this.follow.teamSelected))},s.UpdateActive=function(){this.selectedFlag.node.active=this._followSelected&&0==this._lastScarleIndex,this.teamTag.node.active=!this._followSelected&&this._followTeamSelected&&0==this._lastScarleIndex,this.bars.active=null!=this.follow&&2==this._lastScarleIndex,this.shortName.node.active=null!=this.follow&&this.entityType==y.NPC&&1==this._lastScarleIndex,this.nameLabel.node.active=0==this.shortName.node.active&&null!=this.follow&&this._lastScarleIndex>=1,this.nameLabel.node.active&&""==this.nameOutlineColor&&(this._followTeamSelected?this.nameLabeOutline.color!=this.selectOutlineColor&&(this.nameLabeOutline.color=this.selectOutlineColor,this.nameLabeOutline.width=3):this.nameLabeOutline.color!=this.normalOutlineColor&&(this.nameLabeOutline.color=this.normalOutlineColor,this.nameLabeOutline.width=1))},s.UpdateUI=function(e){null!=this.node&&0!=this.node.active&&(this.nameLabel.string=this.entityType==y.NPC?"Lvl"+e.level+"("+e.item_level+") "+e.name:e.name,this.shortName.string=this.nameLabel.string[0].toUpperCase(),this.UpdateHPBar(e),this.UpdateFoodBar(e),this.UpdateWaterBar(e),this.UpdateDamage(e),this.UpdateGold(e),this.UpdateAction(e))},s.UpdateHPBar=function(e){if(0!=this.bars.active&&this.HPBar.node.active){var t=e.resources.GetResource("health");null!=t?this.HPBar.progress=t.Percentage:this.HPBar.node.active=!1}},s.UpdateFoodBar=function(e){if(0!=this.bars.active&&this.foodBar.node.active){var t=e.resources.GetResource("food");null!=t?this.foodBar.progress=t.Percentage:this.foodBar.node.active=!1}},s.UpdateWaterBar=function(e){if(0!=this.bars.active&&this.waterBar.node.active){var t=e.resources.GetResource("water");null!=t?this.waterBar.progress=t.Percentage:this.waterBar.node.active=!1}},s.UpdateDamage=function(e){0!=this.bars.active&&0!=e.history.damage&&g.instance.showDamge(-Math.ceil(e.history.damage),this.node.position,this.follow)},s.UpdateGold=function(e){0!=this.bars.active&&null!=e.metrics&&e.metrics.Gold>this.gold&&(g.instance.showGetGold(e.metrics.Gold-this.gold,this.node.position,this.follow),this.gold=e.metrics.Gold)},s.UpdateAction=function(e){if(0!=this.bars.active&&null!=e.history.actions){var t=e.history.actions.use;if(null!=t&&null!=t.item&&"poultice"==t.item.item.toLocaleLowerCase()&&t.item.health_restore>0){var i="Use Lv."+t.item.level+" "+t.item.item+",HP+"+t.item.health_restore;g.instance.showUsePoultice(i,this.node.position,this.follow)}}},s.Delete=function(){null!=this.damageTw&&(this.damageTw.stop(),this.damageTw=null),this.node&&(this.node.active=!1)},s.GetHeadPos=function(){var e=new p(this.follow.node.worldPosition);return(e=this.node.parent.getComponent(b).convertToNodeSpaceAR(e)).z=0,e.add3f(0,160*v.CurScale,0)},n(t,[{key:"lastScarleIndex",set:function(e){this._lastScarleIndex!=e&&(this._lastScarleIndex=e,this.UpdateActive())}},{key:"followSelected",set:function(e){this._followSelected!=e&&(this._followSelected=e,this.UpdateActive())}},{key:"followTeamSelected",set:function(e){this._followTeamSelected!=e&&(this._followTeamSelected=e,this.UpdateActive())}},{key:"TeamTagVisiable",set:function(e){this.teamTag.node.active!=e&&(this.teamTag.node.active=e)}},{key:"AllHide",get:function(){return!(this.nameLabel.node.active||this.bars.active||this.teamTag.node.active||this.damageLabel.node.active)}},{key:"BarVisable",set:function(e){this.bars.active=e}},{key:"NameVisable",set:function(e){this.nameLabel.node.active=e}}]),t}(w)).prototype,"bars",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(A.prototype,"HPBar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(A.prototype,"foodBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(A.prototype,"waterBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(A.prototype,"damageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(A.prototype,"nameLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(A.prototype,"nameLabeOutline",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(A.prototype,"shortName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(A.prototype,"teamTag",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(A.prototype,"selectedFlag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=A))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/ZIndex.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,i,e,n,o,c,a,s,p;return{setters:[function(r){t=r.applyDecoratedDescriptor,i=r.inheritsLoose,e=r.defineProperty,n=r.assertThisInitialized,o=r.initializerDefineProperty},function(r){c=r.cclegacy,a=r._decorator,s=r.CCFloat,p=r.Component}],execute:function(){var u,l,y,d,f;c._RF.push({},"79d535wmZZFXKRIL76avPcS","ZIndex",void 0);var h=a.ccclass,v=a.property;r("ZIndex",(u=h("ZIndex"),l=v({type:s,displayName:"priority 越大优先级越高"}),u((f=t((d=function(r){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=r.call.apply(r,[this].concat(c))||this,e(n(t),"r",void 0),e(n(t),"c",void 0),o(n(t),"priority",f,n(t)),t}i(t,r);var c=t.prototype;return c.start=function(){},c.compare=function(r){return this.r-r.r!=0?this.r-r.r:this.c-r.c!=0?this.c-r.c:this.priority-r.priority},t}(p)).prototype,"priority",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=d))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/Environment2D.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Utils.ts","./Environment.ts"],(function(i){"use strict";var e,t,n,r,o,l,a,s,c,h;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,n=i._decorator,r=i.view,o=i.instantiate,l=i.Sprite},function(i){a=i.GlobalConfig},function(i){s=i.Utils},function(i){c=i.Tile,h=i.Environment}],execute:function(){var u;t._RF.push({},"7e557fJC/5Mw4IXwUBliLRg","Environment2D",void 0);var p=n.ccclass;n.property,i("Environment2D",p("Environment2D")(u=function(i){function t(){return i.apply(this,arguments)||this}e(t,i);var n=t.prototype;return n.start=function(){},n.Init=function(i){this.tileNodes={},this.tiles={},a.TilePixelSize=a.Use25D?a.TILE_SIZE_25D:a.TILE_SIZE;var e=i.map,t=e.length;a.MapSize=t,a.MapPixelSize.width=t*a.TilePixelSize.width,a.MapPixelSize.height=t*a.TilePixelSize.height;var n=r.getVisibleSize(),h=n.width/a.MapPixelSize.width,u=n.height/a.MapPixelSize.height,p=Math.min(h,u);a.CurScale=p,a.MinScale=.8*a.CurScale,a.ScaleStep=.1*a.CurScale;for(var v=0;v<t;v++)for(var S=0;S<t;S++){var f=v+"_"+S;if(this.tiles[f]=new c(v,S,e[v][S]),0!=e[v][S]){var d=o(this.tilePrefab);d.name="tile_"+f,this.tileNodes[v+"_"+S]=d,d.getComponent(l).node.position=s.GetTilePos(v,S),this.terrainLayer.addChild(d)}}},t}(h))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Utils.ts","./ZIndex.ts","./EntityManager.ts","./SkillType.ts","./SkillManager.ts"],(function(t){"use strict";var e,i,n,a,s,o,d,c,r,h;return{setters:[function(t){e=t.createClass,i=t.defineProperty},function(t){n=t.cclegacy,a=t.Vec3},function(t){s=t.GlobalConfig},function(t){o=t.Utils},function(t){d=t.ZIndex},function(t){c=t.EntityManager},function(t){r=t.SkillType},function(t){h=t.SkillManager}],execute:function(){var u;t("EntityType",void 0),n._RF.push({},"7ec63E4pHBL4ILxrgV6xruv","Entity",void 0),function(t){t[t.None=0]="None",t[t.NPC=1]="NPC",t[t.Player=2]="Player"}(u||(u=t("EntityType",{})));t("Entity",function(){function t(){i(this,"data",void 0),i(this,"type",void 0),i(this,"view",void 0),i(this,"removed",void 0),i(this,"headInfo",void 0),i(this,"_zindex",void 0),this.removed=!1}var n=t.prototype;return n.setSkins=function(t){this.view.setSkins(t)},n.setNameColor=function(t){this.headInfo.setNameColor(t)},n.setNameOutlineColor=function(t){this.headInfo.setNameOutlineColor(t)},n.start=function(){this.view._moveTarget=o.RCToTileOrigin(this.data.r,this.data.c)},n.update=function(t){this.headInfo.node.active=!0,this.view.node.active=!0,this.data.UpdateEntityData(t),this.headInfo.UpdateUI(this.data),this.view.UpdateView(this.data),this.removed=!1,this.updataAttack(),this.zIndex.r=this.data.r,this.zIndex.c=this.data.c},n.updataAttack=function(){if(this.view.attackEffect.active=this.freeze>0,0!=s.ScaleIndex){var t=this.data.history.attack;if(null!=t&&null!=t.target){var e=c.instance.GetEntityByKey(t.target);if(null!=e){var i=new a(0,50,0).add(this.position),n=new a(0,50,0).add(e.position),o=t.style.toLowerCase();h.instance.showSkill(r[o],i,n,e)}}}},n.onHit=function(t){},n.removeView=function(){this.removed||(this.view.node.active=!1,this.headInfo.node.active=!1,this.removed=!0)},e(t,[{key:"zIndex",get:function(){return null==this._zindex&&(this._zindex=this.view.node.getComponent(d)),this._zindex}},{key:"freeze",get:function(){return this.data&&this.data.status?this.data.status.freeze:0}},{key:"id",get:function(){return this.data.entID}},{key:"teamName",get:function(){return this.data.teamName}},{key:"selectable",set:function(t){this.view.selectable=t,t&&(this.view.selectedNofity=this)}},{key:"position",get:function(){return this.view.node.position}},{key:"teamSelected",set:function(t){this.view.teamSelected=t}},{key:"selected",set:function(t){this.view.selected=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./GlobalConfig.ts","./Profession.ts","./Utils.ts"],(function(t){"use strict";var e,i,s,r,o,n,a,l,c,h,p,u,d,f,v,m,_,g,T,b;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,s=t.inheritsLoose,r=t.assertThisInitialized,o=t.initializerDefineProperty,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,c=t.Sprite,h=t.Node,p=t.SpriteFrame,u=t.math,d=t.Vec3,f=t.UITransform,v=t.Component},function(t){m=t.EventManager,_=t.BattleEvent},function(t){g=t.GlobalConfig},function(t){T=t.Profession},function(t){b=t.Utils}],execute:function(){var k,y,S,w,E,U,C,H,z,F,A,R,D,P,N,V,L,M,O,G,I;a._RF.push({},"7f2e3hUQi5AiKqLJfHi+kgn","EntityView",void 0);var X=l.ccclass,B=l.property;t("EntityView",(k=X("EntityView"),y=B(c),S=B(h),w=B(h),E=B(h),U=B(c),C=B(p),H=B(p),z=B(p),k((I=G=function(t){function i(){var i;return i=t.call(this)||this,e(r(i),"skins",[]),o(r(i),"skin",R,r(i)),o(r(i),"attackEffect",D,r(i)),o(r(i),"teamSelectedSprite",P,r(i)),o(r(i),"selectedSprite",N,r(i)),o(r(i),"hat",V,r(i)),o(r(i),"archer",L,r(i)),o(r(i),"mage",M,r(i)),o(r(i),"warrior",O,r(i)),e(r(i),"last_position",void 0),e(r(i),"current_target",void 0),e(r(i),"tick_delta",void 0),e(r(i),"_profession",void 0),e(r(i),"dir",0),e(r(i),"isDelete",void 0),e(r(i),"_uiTransform",void 0),e(r(i),"_moveTarget",void 0),e(r(i),"selectable",void 0),e(r(i),"selectedNofity",void 0),e(r(i),"_r",void 0),e(r(i),"_c",void 0),i}s(i,t);var a=i.prototype;return a.setSkins=function(t){this.skins=t},a.start=function(){this.skin.spriteFrame=this.skins[this.dir],this.UpdateHat(),this.selectable&&this.node.on(h.EventType.TOUCH_END,this.onTouch,this),null!=this._moveTarget&&(this.node.position=this._moveTarget),this.last_position=this.node.position,this.current_target=this._moveTarget,this.tick_delta=0},a.onTouch=function(){m.view.emit(_.SelectedEntity,this.selectedNofity)},a.UpdateView=function(t){this._moveTarget=b.RCToTileOrigin(t.r,t.c),this._r=t.r,this._c=t.c,t.r!=t.oR||t.c!=t.oC?(this._moveTarget=b.RCToTileOrigin(t.r,t.c),this.last_position=b.RCToTileOrigin(t.oR,t.oC),this.tick_delta=0):this._moveTarget=null,t.oC!=t.c&&this.SetDir(t.c>t.oC?1:0),this.UpdateAttack(),this.profession=t.skills.getProfession()},a.update=function(t){0!=this.node.active&&this.UpdateMove(!0,t)},a.UpdateAttack=function(){},a.SetDir=function(t){t!=this.dir&&(this.dir=t,this.skin.spriteFrame=this.skins[this.dir],this.UpdateHat())},a.UpdateHat=function(){if(this.hat.node.active){var t=this.hat.node;0==this.dir?(t.setPosition(i.RIGHT_HAT_X,t.position.y,t.position.z),t.setScale(1,1,1)):(t.setPosition(i.LEFT_HAT_X,t.position.y,t.position.z),t.setScale(-1,1,1))}},a.UpdateMove=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=0),null!=this._moveTarget)if(this.tick_delta+=e,t){var i=u.clamp(this.tick_delta/(g.TickFrac/1e3),0,1);this.node.position=d.lerp(new d(0,0,0),this.last_position,this._moveTarget,i)}else this.node.position=this._moveTarget},n(i,[{key:"profession",set:function(t){if(this._profession!=t)switch(this._profession=t,t){case T.None:this.hat.node.active=!1;break;case T.Archer:this.hat.node.active=!0,this.hat.spriteFrame=this.archer;break;case T.Mage:this.hat.node.active=!0,this.hat.spriteFrame=this.mage;break;case T.Warrior:this.hat.node.active=!0,this.hat.spriteFrame=this.warrior,this.UpdateHat()}}},{key:"uiTransform",get:function(){return null==this._uiTransform&&(this._uiTransform=this.node.getComponent(f)),this._uiTransform}},{key:"seletAble",set:function(t){this.selectable&&(this.skin.spriteFrame=this.skins[this.dir],this.node.on(h.EventType.TOUCH_END,this.onTouch,this))}},{key:"teamSelected",get:function(){return this.teamSelectedSprite&&this.teamSelectedSprite.active},set:function(t){this.teamSelectedSprite&&(this.teamSelectedSprite.active=t)}},{key:"selected",get:function(){return this.selectedSprite&&this.selectedSprite.active},set:function(t){this.selectedSprite&&(this.selectedSprite.active=t)}}]),i}(v),e(G,"LEFT_HAT_X",-16),e(G,"RIGHT_HAT_X",16),R=i((A=I).prototype,"skin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(A.prototype,"attackEffect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(A.prototype,"teamSelectedSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(A.prototype,"selectedSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(A.prototype,"hat",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(A.prototype,"archer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(A.prototype,"mage",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(A.prototype,"warrior",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=A))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/Mage.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillItem.ts"],(function(t){"use strict";var e,r,n,c;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){c=t.SkillItem}],execute:function(){var o;r._RF.push({},"82d5bS2T4BCmIQZMOhMWZcO","Mage",void 0);var i=n.ccclass;n.property,t("Mage",i("Mage")(o=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){this.flyToTaget()},r}(c))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceTileType.ts","./SkillType.ts","./Entity.ts"],(function(e){"use strict";var t,r,i,l,n,a,p,s;return{setters:[function(e){t=e.createClass,r=e.defineProperty},function(e){i=e.cclegacy,l=e.resources,n=e.randomRange},function(e){a=e.ResourceTileType},function(e){p=e.SkillType},function(e){s=e.EntityType}],execute:function(){i._RF.push({},"83953Sb0tNExrDXcWGX/BRx","ResourcesHelper",void 0);var o=e("ResourcesHelper",function(){function e(){}return e.PrepareLoad=function(){l.loadDir(this.Map),l.loadDir(this.ItemIconsPath),l.loadDir(this.character),l.loadDir(this.SkillRoot)},e.GetNpcSkinByID=function(t){var r=e.NPCPath+"/NPC_"+(t<10?"0"+t:t);return[r+"_a/spriteFrame",r+"_b/spriteFrame"]},e.GetPawnsByID=function(t){var r=e.Pawn+"/pawn_"+(t<10?"0"+t:t);return[r+"_a/spriteFrame",r+"_b/spriteFrame"]},e.GetSkinPathByTeam=function(t,r){switch(r){case s.NPC:return e.GetNpcSkinByID(t);case s.Player:return e.GetPawnsByID(t)}return e.GetPawnsByID(t)},e.GetColorBySkinID=function(t,r){switch(r){case s.NPC:return"#848484";case s.Player:return e.Team_Color[t]}return"#848484"},e.GetNPCNameColorByName=function(e){return null==this.NPC_COLOR_DIC[e]?"#848484":this.NPC_COLOR_DIC[e]},e.GetNPCNameOutlineColorByName=function(e){return null==this.NPC_OUTLINE_COLOR_DIC[e]?"#848484":this.NPC_OUTLINE_COLOR_DIC[e]},e.GetSkins=function(t,r){var i=e.GetSkinPathByTeam(t,r);return[e.GetSpriteFrame(i[0]),e.GetSpriteFrame(i[1])]},e.GetSpriteFrame=function(e){return l.get(e)},e.GetSkillsSpriteFrames=function(t,r){var i=[];switch(t){case p.mage:break;case p.melee:if(null==e.SkillSpriteMap[t]&&(e.SkillSpriteMap[t]={}),null==e.SkillSpriteMap[t][r]||0==e.SkillSpriteMap[t][r].length){e.SkillSpriteMap[t][r]=[];for(var n=function(i){var n=e.SkillRoot+"/melee/"+(1e3*r+i),a=n+"/spriteFrame",p=l.get(a);null!=p?e.SkillSpriteMap[t][r].push(p):(console.error("GetSkillsSpriteFrames Error ",a),l.load(n,(function(){p=l.get(a),e.SkillSpriteMap[t][r].push(p)})))},a=1;a<=5;a++)n(a)}i=e.SkillSpriteMap[t][r];break;case p.range:}return i},e.GetBaseTile=function(){},e.GetTileFullPath=function(t){return e.Tiles+t+"/spriteFrame"},e.GetTileSprites=function(t){var r=e.TileSpriteMap[t];if(null==r||0==r.length){var i=e.TilePathSprites[t];r=[];for(var l=0;l<i.length;l++){var n=e.GetTileFullPath(i[l]),a=e.GetSpriteFrame(n);null!=a?r.push(a):console.error("sp = null path= ",n)}e.TileSpriteMap[t]=r}return r},e.GetTileSprite=function(t){var r=e.GetTileSprites(t);if(null!=r&&0!=r.length){var i=Math.floor(n(0,r.length)),l=r[i];return null==l&&console.log("sp == null",i,r.length),l}return console.log("sprites == null type=  ",t),null},e.GetItemFullPath=function(e){return this.ItemIconsPath+"icon_item_"+e},e.GetItemIcon=function(e){if(null==this.ItemSprteDic&&(this.ItemSprteDic={}),null==this.ItemSprteDic[e]){var t=this.GetItemFullPath(e),r=l.get(t+"/spriteFrame");null!=r&&(this.ItemSprteDic[e]=r)}return this.ItemSprteDic[e]},t(e,null,[{key:"TilePathSprites",get:function(){return null==e._TilePathSprites&&(e._TilePathSprites={},e._TilePathSprites[a.Crystal]=["prop_8_1","prop_8_2","prop_8_3","prop_8_4"],e._TilePathSprites[a.Fish]=["prop_4_1","prop_4_2"],e._TilePathSprites[a.Forest]=["prop_1_1","prop_1_2","prop_1_3","prop_1_4"],e._TilePathSprites[a.Herb]=["prop_5_1","prop_5_2"],e._TilePathSprites[a.Ore]=["prop_6_1","prop_6_2","prop_6_3","prop_6_4"],e._TilePathSprites[a.Stone]=["prop_3_1","prop_3_2","prop_3_3"],e._TilePathSprites[a.Tree]=["prop_7_1"]),e._TilePathSprites}}]),e}());r(o,"playerSkins",{}),r(o,"NPC_SKIN_IDS",[1,2]),r(o,"PAWNS_IDS",[1,2,3,4,6,7,8,9,10,11,12,13,14,15,16]),r(o,"NPC_COLOR_DIC",{passive:"#fbd148",P:"#fbd148",neutral:"#f78812",N:"#f78812",hostile:"#e02401",H:"#e02401"}),r(o,"NPC_OUTLINE_COLOR_DIC",{hostile:"#51050f",H:"#51050f",neutral:"#51050f",N:"#51050f",passive:"#51050f",P:"#51050f"}),r(o,"character","character/"),r(o,"NPCPath","character/NPC"),r(o,"Pawn","character/Pawn"),r(o,"Tiles","map/resources/"),r(o,"Map","map"),r(o,"ItemIconsPath","items/"),r(o,"_TilePathSprites",void 0),r(o,"ItemSprteDic",void 0),r(o,"SkillRoot","skills"),r(o,"Team_Color",{1:"#d0322e",2:"#d02ea3",3:"#372ed0",4:"#2e7ad0",5:"#65d03d",6:"#1c8821",7:"#9d4a23",8:"#974b68",9:"#841332",10:"#4e5e00",11:"#d47880",12:"#d0832e",13:"#bf21ec",14:"#445b7f",15:"#00bfa8",16:"#998cde"}),r(o,"NPC_COLOR",{P:"848484",H:"848484",N:"848484"}),r(o,"SkillSpriteMap",{}),r(o,"TileSpriteMap",{}),i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPropertyPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,a,o,n,l,i,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,i=e.Label,u=e.Component}],execute:function(){var c,s,p,h,f,y,d,v,b;n._RF.push({},"8c1ac9rimlF7qplDUocuo+V","UIPropertyPanel",void 0);var g=l.ccclass,P=l.property;e("UIPropertyPanel",(c=g("UIPropertyPanel"),s=P(i),p=P(i),h=P(i),c((d=t((y=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,a(o(t),"health",d,o(t)),a(o(t),"food",v,o(t)),a(o(t),"water",b,o(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.UpdateData=function(e){var t=e.GetResource("health");this.health.string=null!=t?""+Math.round(t.val):"0";var r=e.GetResource("food");this.food.string=null!=r?""+Math.round(r.val):"0";var a=e.GetResource("water");this.water.string=null!=a?""+Math.round(a.val):"0"},t}(u)).prototype,"health",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"food",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(y.prototype,"water",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Metrics.ts"],(function(t){"use strict";var i,s,e;return{setters:[function(t){i=t.defineProperty},function(t){s=t.cclegacy},function(t){e=t.Metrics}],execute:function(){s._RF.push({},"8fdc5w+UkpOzbhT1qWEXlm3","EntityData",void 0);t("EntityData",function(){function t(){i(this,"alive",void 0),i(this,"entID",void 0),i(this,"annID",void 0),i(this,"r",NaN),i(this,"c",NaN),i(this,"name",void 0),i(this,"color",void 0),i(this,"population",void 0),i(this,"self",void 0),i(this,"status",void 0),i(this,"skills",void 0),i(this,"resources",void 0),i(this,"history",void 0),i(this,"inventory",void 0),i(this,"metrics",void 0),i(this,"teamName",void 0),i(this,"level",void 0),i(this,"item_level",void 0),i(this,"oR",void 0),i(this,"oC",void 0)}var s=t.prototype;return s.UpdateEntityData=function(t){null!=t.base&&this.UpdateBase(t.base),this.alive=t.alive,this.annID=t.annID,this.entID=t.entID,this.UpdateSkills(t.skills),this.UpdateStatus(t.status),this.UpdateResources(t.resource),this.UpdateHistory(t.history),this.UpdateMetrics(t.metrics),this.UpdateInventory(t.inventory)},s.UpdateStatus=function(t){this.status.Update(t)},s.UpdateSkills=function(t){this.skills.UpdateSkills(t)},s.UpdateResources=function(t){this.resources.UpdateResources(t)},s.UpdateMetrics=function(t){t&&(null==this.metrics&&(this.metrics=new e),this.metrics.bindData(t))},s.UpdateHistory=function(t){this.history.UpdateHistory(t)},s.UpdateInventory=function(t){this.inventory.Update(t)},s.UpdateBase=function(t){null!=this.r&&NaN!=this.r&&(this.oR=this.r,this.oC=this.c),this.r=t.r,this.c=t.c,this.name=t.name,this.color=t.color,this.population=t.population,this.self=t.self,this.teamName=t.name.slice(0,t.name.lastIndexOf("_")),this.level=t.level,this.item_level=t.item_level},s.InGrid=function(t,i){return this.c==i&&this.r==t},s.GetPopulation=function(){return this.population},s.GetTeamName=function(){return this.teamName},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/NpcSKills.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Profession.ts","./SkillGroup.ts"],(function(e){"use strict";var i,r,t,s,n,o;return{setters:[function(e){i=e.inheritsLoose,r=e.defineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy},function(e){n=e.Profession},function(e){o=e.SkillGroup}],execute:function(){s._RF.push({},"914fbzSV/JBiLLsNZH/bA0G","NpcSKills",void 0);e("NpcSkills",function(e){function s(){var i;return i=e.call(this)||this,r(t(i),"melee",void 0),r(t(i),"range",void 0),r(t(i),"mage",void 0),i.skills={},i.melee=i.AddSkill("melee"),i.range=i.AddSkill("range"),i.mage=i.AddSkill("mage"),i}return i(s,e),s.prototype.getProfession=function(){var e=this.melee,i=e.compare(this.range);return-1==i&&(e=this.range),-1==(i=e.compare(this.mage))&&(e=this.mage),0==i?n.None:e==this.melee?n.Warrior:e==this.range?n.Archer:e==this.mage?n.Mage:n.None},s}(o));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIGame.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./GlobalConfig.ts","./UIStatisticalData.ts","./UIAgentStatus.ts","./UITeamScroll.ts","./World.ts","./UIMarket.ts"],(function(e){"use strict";var t,i,a,r,l,n,o,s,p,c,d,u,h,S,b,f,m,w,k,y,g,v,P,R,U,z,M,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.defineProperty},function(e){n=e.cclegacy,o=e._decorator,s=e.Slider,p=e.UITransform,c=e.CCFloat,d=e.Label,u=e.Sprite,h=e.Node,S=e.SpriteFrame,b=e.input,f=e.Input,m=e.math,w=e.Vec3,k=e.KeyCode,y=e.Component},function(e){g=e.EventManager,v=e.BattleEvent},function(e){P=e.GlobalConfig},function(e){R=e.UIStatisticalData},function(e){U=e.UIAgentStatus},function(e){z=e.UITeamScroll},function(e){M=e.World},function(e){I=e.UIMarket}],execute:function(){var B,D,C,F,x,E,L,_,K,A,G,T,Z,Y,O,W,j,H,N,V,X,q,J,Q,$,ee,te,ie,ae,re,le,ne,oe;n._RF.push({},"9608aZ/PPZIGL79oR6+9aWj","UIGame",void 0);var se=o.ccclass,pe=o.property;e("UIGame",(B=se("UIGame"),D=pe(M),C=pe(R),F=pe(z),x=pe(U),E=pe(I),L=pe(s),_=pe(p),K=pe(c),A=pe(d),G=pe(d),T=pe(u),Z=pe(u),Y=pe(h),O=pe(u),W=pe([S]),B((N=t((H=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"world",N,r(t)),a(r(t),"statisticalPanel",V,r(t)),a(r(t),"teamScroll",X,r(t)),a(r(t),"agentStatus",q,r(t)),a(r(t),"market",J,r(t)),a(r(t),"stepSlider",Q,r(t)),a(r(t),"sliderBar",$,r(t)),a(r(t),"sliderBarMax",ee,r(t)),a(r(t),"stepLabel",te,r(t)),a(r(t),"speedLabel",ie,r(t)),a(r(t),"pauseSprite",ae,r(t)),a(r(t),"playerSprite",re,r(t)),a(r(t),"btnSharik",le,r(t)),a(r(t),"hideSp",ne,r(t)),a(r(t),"hideSpriteFrame",oe,r(t)),l(r(t),"sharkTween",void 0),l(r(t),"hideAll",void 0),l(r(t),"curPacket",void 0),t}i(t,e);var n=t.prototype;return n.start=function(){this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress),this.playerSprite.node.active=P.Pause,this.pauseSprite.node.active=!P.Pause,this.speedLabel.string=P.SpeedRate+"x",this.hideSp.spriteFrame=this.node.active?this.hideSpriteFrame[0]:this.hideSpriteFrame[1],g.view.on(v.PacketChange,this.onPacketChange,this),b.on(f.EventType.KEY_DOWN,this.onKeyDown,this)},n.Pause=function(){P.Pause=!P.Pause},n.ZoomUp=function(){this.world.UpdateScale(1),this.world.Resize()},n.ZoomDown=function(){this.world.UpdateScale(-1),this.world.Resize()},n.update=function(){this.stepLabel.string="Turn "+this.world.replayStep,this.playerSprite.node.active=P.Pause,this.pauseSprite.node.active=!P.Pause,this.stepSlider.progress=this.world.replayStep/this.world.totalStep,this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress)},n.onStepSlider=function(){this.world.replayStep=Math.floor(this.stepSlider.progress*this.world.totalStep),this.world.replayStep=m.clamp(this.world.replayStep,0,this.world.totalStep-1),this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress),this.world.Render()},n.SharkStatisticalPanel=function(){var e=this.statisticalPanel.node,t=this.btnSharik;if(e.active){var i=e.position.x+647;new w(i,e.position.y,e.position.z);e.active=!1,t.active=!0}else{e.active=!0,t.active=!1;e.position.x}},n.OnBtnUpdateSpeed=function(){this.UpdateSpeed(0)},n.UpdateSpeed=function(e){switch(void 0===e&&(e=0),e){case 0:P.SpeedRate>=8?P.SpeedRate=.5:P.SpeedRate=2*P.SpeedRate;break;case 1:P.SpeedRate=2*P.SpeedRate,P.SpeedRate=Math.min(P.SpeedRate,8);break;case-1:P.SpeedRate=P.SpeedRate/2,P.SpeedRate=Math.max(P.SpeedRate,.5);break;default:P.SpeedRate>=8?P.SpeedRate=.5:P.SpeedRate=2*P.SpeedRate}this.speedLabel.string=P.SpeedRate+"x"},n.HideAll=function(){this.node.active=!this.node.active,this.hideSp.spriteFrame=this.node.active?this.hideSpriteFrame[0]:this.hideSpriteFrame[1]},n.showMarket=function(e){void 0===e&&(e=!0),this.market.node.active=e,this.market.bindData(this.curPacket&&this.curPacket.market)},n.onPacketChange=function(e){this.curPacket=e,this.market.node.active&&this.market.bindData(this.curPacket&&this.curPacket.market)},n.onKeyDown=function(e){switch(e.keyCode){case k.SPACE:this.Pause();break;case k.COMMA:this.UpdateSpeed(-1);break;case k.PERIOD:this.UpdateSpeed(1);break;case k.KEY_Z:this.ZoomDown();break;case k.KEY_X:this.ZoomUp();break;case k.KEY_M:this.showMarket(!this.market.node.active);break;case k.KEY_S:this.SharkStatisticalPanel()}},t}(y)).prototype,"world",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(H.prototype,"statisticalPanel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(H.prototype,"teamScroll",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(H.prototype,"agentStatus",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(H.prototype,"market",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(H.prototype,"stepSlider",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(H.prototype,"sliderBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(H.prototype,"sliderBarMax",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 616}}),te=t(H.prototype,"stepLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(H.prototype,"speedLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(H.prototype,"pauseSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(H.prototype,"playerSprite",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(H.prototype,"btnSharik",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(H.prototype,"hideSp",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(H.prototype,"hideSpriteFrame",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=H))||j));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIDamge.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts"],(function(t){"use strict";var e,n,o,i,r,a,l,s,c,u,p,f,d,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,l=t._decorator,s=t.Label,c=t.Vec3,u=t.math,p=t.tween,f=t.easing,d=t.UITransform,h=t.Component},function(t){g=t.GlobalConfig}],execute:function(){var m,y,v,w,I;a._RF.push({},"996c7fLXCVA9Z2mJ/jjFQ7k","UIDamge",void 0);var x=l.ccclass,D=l.property;t("UIDamge",(m=x("UIDamge"),y=D(s),m((I=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,o(i(e),"text",I,i(e)),r(i(e),"follow",void 0),e}n(e,t);var a=e.prototype;return a.start=function(){var t=new c(u.randomRangeInt(-40,40),u.randomRangeInt(10,30)).add(this.text.node.position),e=this.node,n=g.BASE_DMG_TIME/g.SpeedRate,o=this;p(this.text.node).to(n,{position:t},{easing:f.sineInOut}).to(n,{},{onComplete:function(){e.parent=null,e.destroy(),e=null,o.follow=null}}).start()},a.update=function(t){if(null!=this.follow){var e=new c(this.follow.node.worldPosition);(e=this.node.parent.getComponent(d).convertToNodeSpaceAR(e)).z=0,e.y+=100,this.node.position=e}},a.setText=function(t,e){this.text.string=t,this.text.color=e},e}(h)).prototype,"text",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=w))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/DropdownOptionData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,i,a;return{setters:[function(t){o=t.defineProperty},function(t){i=t.cclegacy,a=t._decorator}],execute:function(){var n;i._RF.push({},"999a1EtwsxMGI6/+fXAnTa3","DropdownOptionData",void 0);var e=a.ccclass;a.property,t("default",e("DropdownOptionData")(n=function(t,i,a){void 0===a&&(a=!1),o(this,"label",""),o(this,"icon",void 0),o(this,"alwaysBottom",!1),this.label=t,this.icon=i,this.alwaysBottom=a})||n);i._RF.pop()}}}));

System.register("chunks:///_virtual/EntityManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./Utils.ts","./EntityView.ts","./NpcData.ts","./PlayerData.ts","./ZIndex.ts","./HeadInfo.ts","./Entity.ts","./ResourcesHelper.ts"],(function(t){"use strict";var e,n,a,i,s,r,o,p,h,l,c,y,u,m,d;return{setters:[function(t){e=t.defineProperty},function(t){n=t.cclegacy,a=t.instantiate,i=t.math},function(t){s=t.EventManager,r=t.BattleEvent},function(t){o=t.Utils},function(t){p=t.EntityView},function(t){h=t.NpcData},function(t){l=t.PlayerData},function(t){c=t.ZIndex},function(t){y=t.HeadInfo},function(t){u=t.EntityType,m=t.Entity},function(t){d=t.ResourcesHelper}],execute:function(){n._RF.push({},"9aca7WpJKBBl4Xa9IdkYCm2","EntityManager",void 0);var f=t("Team",function(){function t(t,n){e(this,"teamName",void 0),e(this,"skins",void 0),e(this,"color",void 0),e(this,"entities",void 0),e(this,"population",void 0),this.teamName=t,this.skins=[],this.color="",this.entities=[],this.population=n}return t.prototype.addEntity=function(t){this.entities.push(t)},t}()),v=t("EntityManager",function(){function t(){e(this,"players",void 0),e(this,"npcs",void 0),e(this,"headInfoLayer",void 0),e(this,"entityLayer",void 0),e(this,"characterPrefab",void 0),e(this,"headPrefab",void 0),e(this,"playerSkinsTemp",void 0),e(this,"npcSkinsTemp",void 0),e(this,"teamMap",void 0),e(this,"populationTeamMap",void 0),e(this,"teams",void 0)}var n=t.prototype;return n.init=function(e,n,a){this.players={},this.npcs={},this.teamMap={},this.teams=[],this.populationTeamMap={},this.playerSkinsTemp=[].concat(t.PAWNS_IDS),this.npcSkinsTemp=[].concat(t.NPC_SKIN_IDS),this.entityLayer=e.entityLayer,this.headInfoLayer=e.headInfoLayer,this.characterPrefab=n,this.headPrefab=a},n.executePacket=function(t,e){this.UpdatePlayers(t),this.UpdateNpcs(t),this.updateZindex()},n.updateZindex=function(){this.entityLayer.children.sort((function(t,e){var n=t.getComponent(c),a=e.getComponent(c);return null==n||null==a?(console.log("az == null || bz == null"),-1):n.compare(a)}))},n.CreateEntity=function(e,n,o){var c;switch(o){case u.None:c=null;break;case u.NPC:var v=new h(n),P=a(this.characterPrefab);P.setParent(this.entityLayer);var S=P.getComponent(p),N=a(this.headPrefab);N.setParent(this.headInfoLayer),N.getComponent(y).entityType=o,(c=new m).data=v,c.type=o,c.view=S,c.selectable=!1,c.headInfo=N.getComponent(y),c.headInfo.setFollow(c.view),null!=this.npcs[e]&&console.log(e),this.npcs[e]=c,0==this.npcSkinsTemp.length&&(this.npcSkinsTemp=[].concat(t.NPC_SKIN_IDS));var k=i.randomRangeInt(0,this.npcSkinsTemp.length),C=this.npcSkinsTemp.splice(k,1)[0];c.setSkins(d.GetSkins(C,o));var I=d.GetNPCNameColorByName(c.data.name[0].toUpperCase());c.setNameColor(I),c.setNameOutlineColor(d.GetNPCNameOutlineColorByName(c.data.name[0].toUpperCase())),c.start();break;case u.Player:var g=new l(n),T=a(this.characterPrefab);T.setParent(this.entityLayer);var E=T.getComponent(p),w=a(this.headPrefab);w.setParent(this.headInfoLayer),w.getComponent(y).entityType=o,(c=new m).data=g,c.type=o,c.view=E,c.headInfo=w.getComponent(y),c.selectable=!0,c.headInfo.setFollow(c.view),this.players[e]=c;var M=c.teamName,b=this.teamMap[M];if(null==this.teamMap[M]){b=new f(M,g.GetPopulation()),this.teams.push(M),0==this.playerSkinsTemp.length&&(this.playerSkinsTemp=[].concat(t.PAWNS_IDS));var L=i.randomRangeInt(0,this.playerSkinsTemp.length),_=this.playerSkinsTemp.splice(L,1)[0];b.color=d.GetColorBySkinID(_,o),b.skins=d.GetSkins(_,o),c.setSkins(b.skins),c.setNameColor(b.color),b.addEntity(c),this.teamMap[M]=b,this.populationTeamMap[b.population]=b,s.view.emit(r.AddTeam,M)}else c.setSkins(b.skins),c.setNameColor(b.color),b.addEntity(c);c.start()}return c},n.UpdatePlayers=function(t){for(var e in t.player){var n=t.player[e];null==this.players[e]?this.players[e]=this.CreateEntity(e,n,u.Player):this.players[e].update(n)}var a=[];for(var i in this.players)null==t.player[i]&&a.push(i);for(var s=0;s<a.length;s++){var r=a[s];0==this.players[r].removed&&(this.players[r].update(o.GetPlayerLastData(r)),this.players[r]&&this.players[r].removeView())}},n.UpdateNpcs=function(t){for(var e in t.npc){var n=t.npc[e];null==this.npcs[e]?this.npcs[e]=this.CreateEntity(e,n,u.NPC):this.npcs[e].update(n)}var a=[];for(var i in this.npcs)null==t.npc[i]&&a.push(i);for(var s=0;s<a.length;s++){var r=a[s];this.npcs[r]&&this.npcs[r].removeView()}},n.GetPlayersByTeam=function(t){return this.teamMap[t]&&this.teamMap[t].entities},n.GetEntityByKey=function(t){return this.players[t]?this.players[t]:this.npcs[t]?this.npcs[t]:null},n.GetTeamByPopulation=function(t){return this.populationTeamMap[t]},n.GetTeamByName=function(t){return this.teamMap[t]},t}());e(v,"NPC_SKIN_IDS",[1,2]),e(v,"PAWNS_IDS",[1,2,3,4,6,7,8,9,10,11,12,13,14,15,16]),e(v,"instance",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/UIInfo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,o,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Label,l=e.Component}],execute:function(){var s,u,p,f,d,y,I;i._RF.push({},"9cc99ijR15ESanGO5Q0zGff","UIInfo",void 0);var b=o.ccclass,g=o.property;e("UIInfo",(s=b("UIInfo"),u=g(c),p=g(c),s((y=t((d=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(a(t),"damageTaken",y,a(t)),r(a(t),"defeats",I,a(t)),t}n(t,e);var i=t.prototype;return i.start=function(){},i.UpdateData=function(e){},t}(l)).prototype,"damageTaken",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(d.prototype,"defeats",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAgentStatusItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,a,r,n,i,u,s,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.defineProperty,i=e.createClass},function(e){u=e.cclegacy,s=e._decorator,o=e.Label,c=e.Component}],execute:function(){var b,p,f,g,h,v,y;u._RF.push({},"a75f6LPMwtJa5Q0WLIkZrkp","UIAgentStatusItem",void 0);var L=s.ccclass,_=s.property;e("UIAgentStatusItem",(b=L("UIAgentStatusItem"),p=_(o),f=_(o),b((v=t((h=function(e){function t(){for(var t,l=arguments.length,i=new Array(l),u=0;u<l;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,a(r(t),"labelLabel",v,r(t)),a(r(t),"valueLabel",y,r(t)),n(r(t),"_label","label"),n(r(t),"_value","0"),t}return l(t,e),t.prototype.start=function(){},i(t,[{key:"label",get:function(){return this._label},set:function(e){this._label=e,this.labelLabel.string=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.valueLabel.string=e}}]),t}(c)).prototype,"labelLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(h.prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/Dropdown.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropdownItem.ts","./DropdownOptionData.ts"],(function(e){"use strict";var t,i,n,o,s,r,a,l,h,p,d,c,m,u,f,g,b,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.defineProperty,r=e.createClass,a=e.asyncToGenerator},function(e){l=e.cclegacy,h=e._decorator,p=e.Label,d=e.Node,c=e.Sprite,m=e.EventHandler,u=e.Toggle,f=e.UITransform,g=e.instantiate,b=e.Component},function(e){v=e.default},function(e){w=e.default}],execute:function(){var D,I,y,T,C,_,S,x,L,z,k,O,E,N,P,G,R,U,V;l._RF.push({},"aa78aliDcZOwLVTWED0ZCDj","Dropdown",void 0);var j=h.ccclass,F=h.property;e("Dropdown",(D=j("Dropdown"),I=F(p),y=F(d),T=F(p),C=F(c),_=F(p),S=F(c),x=F(m),L=F([w]),D((O=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(o(t),"label",O,o(t)),n(o(t),"template",E,o(t)),n(o(t),"labelCaption",N,o(t)),n(o(t),"spriteCaption",P,o(t)),n(o(t),"labelItem",G,o(t)),n(o(t),"spriteItem",R,o(t)),n(o(t),"onChanged",U,o(t)),n(o(t),"options",V,o(t)),s(o(t),"_dropDown",void 0),s(o(t),"validTemplate",!1),s(o(t),"items",[]),s(o(t),"isShow",!1),s(o(t),"_selectedIndex",-1),t}i(t,e);var l=t.prototype;return l.Select=function(e){for(var t=0;t<this.options.length;t++)this.options[t].label==e&&(this.selectedIndex=t)},l.addOptionDatas=function(e,t){var i,n=this;e&&e.forEach((function(e){n.options.push(e)}));for(var o=-1,s=0;s<this.options.length;s++)if(this.options[s].alwaysBottom){i=this.options[s],o=s;break}null!=i&&(this.options.splice(o,1),this.options.push(i))},l.clearOptionDatas=function(){this.options=[],this.refreshShownValue()},l.show=function(){if(this.validTemplate||(this.setUpTemplate(),this.validTemplate)){this.isShow=!0,this._dropDown=this.createDropDownList(this.template),this._dropDown.name="DropDown",this._dropDown.active=!0,this._dropDown.setParent(this.template.parent);var e=this._dropDown.getComponentInChildren(v),t=e.node.parent;e.node.active=!0,this.items=[];for(var i=0,n=this.options.length;i<n;i++){var o=this.options[i],s=this.addItem(o,i==this.selectedIndex,e,this.items);s&&(s.toggle.isChecked=i==this.selectedIndex,s.toggle.node.on(u.EventType.TOGGLE,this.onSelectedItem,this))}e.node.active=!1,t.getComponent(f).height=e.node.getComponent(f).height*this.options.length}},l.addItem=function(e,t,i,n){var o=this.createItem(i);return o.node.setParent(i.node.parent),o.node.active=!0,o.node.name="item_"+(this.items.length+e.label?e.label:""),o.toggle&&(o.toggle.isChecked=!1),o.label&&(o.label.string=e.label),o.sprite&&(o.sprite.spriteFrame=e.icon,o.sprite.enabled=null!=e.icon),this.items.push(o),o},l.hide=function(){this.isShow=!1,null!=this._dropDown&&this.delayedDestroyDropdownList(.15)},l.delayedDestroyDropdownList=function(){var e=a(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=0,n=this.items.length;i<n;i++)null!=this.items[i]&&this.destroyItem(this.items[i]);this.items=[],null!=this._dropDown&&this.destroyDropDownList(this._dropDown),this._dropDown=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.destroyItem=function(e){},l.setUpTemplate=function(){if(this.validTemplate=!1,this.template){this.template.active=!0;var e=this.template.getComponentInChildren(u);if(this.validTemplate=!0,e&&e.node!=this.template?null==this.labelItem||this.labelItem.node.isChildOf(e.node)?null==this.spriteItem||this.spriteItem.node.isChildOf(e.node)||(this.validTemplate=!1,console.error("The dropdown template is not valid. The Item Sprite must be on the item Node or children of it.")):(this.validTemplate=!1,console.error("The dropdown template is not valid. The Item Label must be on the item Node or children of it.")):(this.validTemplate=!1,console.error("The dropdown template is not valid. The template must have a child Node with a Toggle component serving as the item.")),this.validTemplate){var t=e.node.addComponent(v);t.label=this.labelItem,t.sprite=this.spriteItem,t.toggle=e,t.node=e.node,this.template.active=!1,this.validTemplate=!0}else this.template.active=!1}else console.error("The dropdown template is not assigned. The template needs to be assigned and must have a child GameObject with a Toggle component serving as the item")},l.refreshShownValue=function(){if(!(this.options.length<=0)){var e=this.options[this.clamp(this.selectedIndex,0,this.options.length-1)];this.labelCaption&&(e&&""!=e.label&&"Clear"!=e.label?this.labelCaption.string=""+e.label:this.labelCaption.string="Team")}},l.createDropDownList=function(e){return g(e)},l.destroyDropDownList=function(e){e.destroy()},l.createItem=function(e){return g(e.node).getComponent(v)},l.onSelectedItem=function(e){for(var t=e.node.parent,i=0;i<t.children.length;i++)if(t.children[i]==e.node){this.selectedIndex=i-1;break}this.onChanged&&this.onChanged.emit([this.options[this.selectedIndex]]),this.hide()},l.onClick=function(){this.isShow?this.hide():this.show()},l.start=function(){this.template.active=!1,this.node.on(d.EventType.TOUCH_END,this.onClick,this)},l.clamp=function(e,t,i){return e<t?t:e>i?i:e},r(t,[{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(e){this._selectedIndex=e,this.refreshShownValue()}}]),t}(b)).prototype,"label",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(k.prototype,"template",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=t(k.prototype,"labelCaption",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=t(k.prototype,"spriteCaption",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),G=t(k.prototype,"labelItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),R=t(k.prototype,"spriteItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=t(k.prototype,"onChanged",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=t(k.prototype,"options",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=k))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/History.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts","./Actions.ts"],(function(t){"use strict";var i,n,o,e,s,a;return{setters:[function(t){i=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized},function(t){e=t.cclegacy},function(t){s=t.Component},function(t){a=t.Actions}],execute:function(){e._RF.push({},"abbccMZ3fhIuac9+Gr/0l5f","History",void 0);t("Attack",function(t){function e(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(o(i),"target",void 0),n(o(i),"style",void 0),i}return i(e,t),e}(s)),t("History",function(t){function e(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(o(i),"damage",void 0),n(o(i),"timeAlive",void 0),n(o(i),"attack",void 0),n(o(i),"actions",void 0),i}return i(e,t),e.prototype.UpdateHistory=function(t){this.damage=t.damage,this.timeAlive=t.timeAlive,this.attack=t.attack,null==t.actions?this.actions=null:(null==this.actions&&(this.actions=new a),this.actions.Update(t.actions))},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillType.ts","./SkillItem.ts","./ResourcesHelper.ts"],(function(e){"use strict";var i,t,r,a,l,n,s,o,p,f,u,c,b,h,k;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.defineProperty,r=e.inheritsLoose,a=e.assertThisInitialized,l=e.initializerDefineProperty,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,p=e.Prefab,f=e.resources,u=e.instantiate,c=e.Component},function(e){b=e.SkillType},function(e){h=e.SkillItem},function(e){k=e.ResourcesHelper}],execute:function(){var y,M,P,g,v,d,S,m,_,w,z,R,D,x,F,H;s._RF.push({},"ace4fHjEsVJ3qQs0M/xAFFx","SkillManager",void 0);var I=o.ccclass,L=o.property,C=e("skillPrefabMap",(y=I("SkillPrefabMap"),M=L({type:b}),P=L(p),y((d=i((v=function(){l(this,"type",d,this),l(this,"prefab",S,this)}).prototype,"type",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(v.prototype,"prefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));e("SkillManager",(m=I("SkillManager"),_=L({type:[C]}),w=L(p),m((H=F=function(e){function i(){for(var i,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return i=e.call.apply(e,[this].concat(n))||this,t(a(i),"showList",[b.melee,b.range,b.mage]),l(a(i),"prefabMap",D,a(i)),t(a(i),"_skillPrefabMap",void 0),l(a(i),"basetPrefab",x,a(i)),i}r(i,e);var s=i.prototype;return s.start=function(){i.instance=this,f.loadDir(k.SkillRoot+"/"),f.loadDir(k.SkillRoot+"/melee/")},s.showSkill=function(e,i,t,r){if(void 0===i&&(i=null),void 0===t&&(t=null),void 0===r&&(r=null),-1!=this.showList.indexOf(e)){var a=this.basetPrefab;null!=this.skillPrefabMap[e]&&(a=this.skillPrefabMap[e]);var l=u(a);l.getComponent(h).Init(e,i,t,r),l.setParent(this.node)}},n(i,[{key:"skillPrefabMap",get:function(){if(null==this._skillPrefabMap){this._skillPrefabMap={};for(var e=0;e<this.prefabMap.length;e++){var i=this.prefabMap[e];this._skillPrefabMap[i.type]=i.prefab}}return this._skillPrefabMap}}]),i}(c),t(F,"instance",void 0),D=i((R=H).prototype,"prefabMap",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=i(R.prototype,"basetPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=R))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/Adapter.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts"],(function(t){"use strict";var e,i,n,o,s,h,r,c,l,d,a,u,g;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,h=t.find,r=t.Canvas,c=t.view,l=t.Size,d=t.ResolutionPolicy,a=t.UITransform,u=t.Component},function(t){g=t.GlobalConfig}],execute:function(){var p;o._RF.push({},"ad980tkIQJPUZIGjKCyAMyu","Adapter",void 0);var w=s.ccclass;s.property,t("Adapter",w("Adapter")(p=function(t){function o(){for(var e,o=arguments.length,s=new Array(o),h=0;h<o;h++)s[h]=arguments[h];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"clientWidth",void 0),i(n(e),"clientHeight",void 0),i(n(e),"curDR",null),e}e(o,t);var s=o.prototype;return s.start=function(){this.resize()},s.resize=function(){var t=h("Canvas").getComponent(r);g.CanvasNode=t.node,this.curDR||(this.curDR=c.getDesignResolutionSize());var e=this.curDR;this.clientWidth=document.body.clientWidth,this.clientHeight=document.body.clientHeight;var i=new l(this.clientWidth,this.clientHeight),n=i.width,o=i.height,s=n,u=o;n/o>e.width/e.height?s=(u=e.height)*n/o:u=o/n*(s=e.width),c.setDesignResolutionSize(s,u,d.EXACT_FIT),t.node.getComponent(a).setContentSize(s,u),t.node.emit("resize"),g.Viewport.width=s+512,g.Viewport.height=u+256,g.Viewport.x=-g.Viewport.width/2,g.Viewport.y=-g.Viewport.height/2},s.update=function(){document.body.clientWidth==this.clientWidth&&this.clientHeight==document.body.clientHeight||this.resize2()},s.resize2=function(){console.log("resize2 ------------- ");var t=h("Canvas").getComponent(r);g.CanvasNode=t.node,this.curDR||(this.curDR=c.getDesignResolutionSize());var e=this.curDR;this.clientWidth=document.body.clientWidth,this.clientHeight=document.body.clientHeight;var i=new l(this.clientWidth,this.clientHeight),n=i.width,o=i.height,s=n,a=o;n/o>e.width/e.height?(console.log("如果更长，则用定高"),s=a*n/o):(console.log("如果更短，则用定宽 "),a=o/n*s),console.log("resize =>clientSize: "+this.clientWidth+","+this.clientHeight+"| final : "+s+","+a),c.setDesignResolutionSize(s,a,5),c.setDesignResolutionSize(s,a,d.SHOW_ALL),t.node.emit("resize"),g.Viewport.width=s+512,g.Viewport.height=a+256,g.Viewport.x=-g.Viewport.width/2,g.Viewport.y=-g.Viewport.height/2},o}(u))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/Actions.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts","./ItemComponent.ts"],(function(t){"use strict";var e,i,n,s,o,l;return{setters:[function(t){e=t.defineProperty,i=t.inheritsLoose,n=t.assertThisInitialized},function(t){s=t.cclegacy},function(t){o=t.Component},function(t){l=t.ItemComponent}],execute:function(){s._RF.push({},"adad6Z/+JZOMZFKfqb410NU","Actions",void 0);var u=t("UseAction",(function(){e(this,"item",void 0)})),c=t("BuyAction",(function(){e(this,"item",void 0)})),r=t("SellAction",(function(){e(this,"item",void 0),e(this,"price",void 0)}));t("Actions",function(t){function s(){for(var i,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,e(n(i),"move",void 0),e(n(i),"use",void 0),e(n(i),"buy",void 0),e(n(i),"sell",void 0),i}return i(s,t),s.prototype.Update=function(t){null!=t.Use?(this.use=new u,this.use.item=new l,this.use.item.Update(t.Use.Item)):this.use=null,null!=t.Buy?(this.buy=new c,this.buy.item=new l,this.buy.item.Update(t.Buy.Item)):this.buy=null,null!=t.Sell?(this.sell=new r,this.sell.item=new l,this.sell.item.Update(t.Sell.Item),this.sell.price=t.Sell.Price):this.sell=null},s}(o));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadoutGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(o){"use strict";var t,n,e,i,r;return{setters:[function(o){t=o.inheritsLoose,n=o.defineProperty,e=o.assertThisInitialized},function(o){i=o.cclegacy},function(o){r=o.Component}],execute:function(){i._RF.push({},"afe7b6XWopOPJg4Rnd0x8kY","LoadoutGroup",void 0);o("Loadout",function(o){function i(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=o.call.apply(o,[this].concat(r))||this,n(e(t),"level",void 0),n(e(t),"color",void 0),t}return t(i,o),i}(r)),o("LoadoutGroup",(function(){n(this,"loadouts",void 0)}));i._RF.pop()}}}));

System.register("chunks:///_virtual/World.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./GlobalConfig.ts","./Utils.ts","./EntityManager.ts","./StatisticalManager.ts","./Environment25D.ts","./Environment2D.ts"],(function(e){"use strict";var t,i,n,a,o,r,l,s,c,u,p,h,d,y,f,v,b,S,g,m,L;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Prefab,u=e.CCBoolean,p=e.Vec3,h=e.math,d=e.Component},function(e){y=e.EventManager,f=e.BattleEvent},function(e){v=e.GlobalConfig},function(e){b=e.Utils},function(e){S=e.EntityManager},function(e){g=e.StatisticalManager},function(e){m=e.Environment25D},function(e){L=e.Environment2D}],execute:function(){var k,E,w,A,D,C,P,z,I,R,_,N,T,x,M,O,U,F,G,H,W,B,Y,V,j;r._RF.push({},"b159flOfq1C9auMv5eo7Jsm","World",void 0);var q=l.ccclass,J=l.property;e("World",(k=q("World"),E=J({type:s,visible:!0}),w=J({type:s,visible:!0}),A=J({type:s,visible:!0}),D=J({type:s,visible:!0}),C=J({type:s,visible:!0}),P=J({type:s,visible:!0}),z=J({type:s,visible:!0}),I=J(c),R=J(c),_=J(u),k((j=V=function(e){function i(){var i;return i=e.call(this)||this,a(o(i),"terrainLayer",x,o(i)),a(o(i),"entityLayer",M,o(i)),a(o(i),"touchLayer",O,o(i)),a(o(i),"waterLayer",U,o(i)),a(o(i),"borderLayer",F,o(i)),a(o(i),"treeLayer",G,o(i)),a(o(i),"headInfoLayer",H,o(i)),a(o(i),"characterPrefab",W,o(i)),a(o(i),"headPrefab",B,o(i)),a(o(i),"use25D",Y,o(i)),t(o(i),"replayStep",0),t(o(i),"totalStep",0),t(o(i),"lookAtNode",void 0),t(o(i),"packets",void 0),t(o(i),"curEntity",void 0),t(o(i),"env",void 0),t(o(i),"last",0),t(o(i),"updateDelay",0),t(o(i),"isMoving",void 0),S.instance=new S,g.instance=new g,i}n(i,e);var r=i.prototype;return r.start=function(){this.init()},r.init=function(){v.Use25D=this.use25D,v.Use25D?this.env=this.node.getComponent(m):this.env=this.node.getComponent(L),this.parseReplayData(v.replay),this.env.Init(v.replay),this.node.setScale(v.CurScale,v.CurScale,v.CurScale),S.instance.init(this,this.characterPrefab,this.headPrefab),this.InitTouch(),y.Init(),y.view.on(f.LookAtEntity,this.LookAt,this),y.view.on(f.RemoveEntity,this.OnRemoveEntity,this),y.view.on(f.SelectedTeam,this.OnSelectedTeam,this)},r.parseReplayData=function(e){this.packets=e.packets,this.totalStep=this.packets.length,this.replayStep=0},r.LookAt=function(e){this.lookAtNode=null!=e&&e.entity?e.entity.view.node:null,this.UpdateLookAtNode(1)},r.OnRemoveEntity=function(e){this.lookAtNode&&this.lookAtNode==e.view.node&&(this.lookAtNode=null)},r.OnSelectedTeam=function(e){},r.Render=function(){if(null!=this.packets){0==v.Pause&&this.replayStep>=this.packets.length&&(this.replayStep=0);var e=this.packets[this.replayStep];y.view.emit(f.PacketChange,e),y.view.emit(f.StepChange,this.replayStep),S.instance.executePacket(e,this.replayStep),this.env.updateInactiveResources(e.resource),this.replayStep++,this.replayStep>=this.packets.length?(v.Pause=!0,v.isEnd=!0):v.isEnd=!1}},r.update=function(e){null==this.packets||v.Pause||(Date.now()-this.last>v.TickFrac&&(this.last=Date.now(),this.Render()),this.UpdateLookAtNode(e))},r.UpdateLookAtNode=function(e){if(null!=this.lookAtNode&&this.lookAtNode.active&&this.lookAtNode.position&&v.ScaleIndex>0){var t=new p(-1,-1,1).multiply(this.lookAtNode.position).multiplyScalar(v.CurScale);if(p.distance(this.node.position,t)>2*v.TilePixelSize.x){var i=h.clamp(.3+e/(v.TickFrac/1e3),0,1);this.node.position=p.lerp(this.node.position,this.node.position,t,i),this.node.position=t}}},r.InitTouch=function(){var e=this;this.touchLayer.on(s.EventType.TOUCH_MOVE,(function(t){e.isMoving=!0;var i=t.getDelta();e.node.position=b.GetDragPos(e.node.position.add3f(i.x,i.y,0)),e.LookAt(null)}),this)},r.Reset=function(){},r.UpdateScale=function(e){v.ScaleIndex+=e,v.ScaleIndex=h.clamp(v.ScaleIndex,0,v.Scales.length-1),v.LastScale=v.CurScale,v.CurScale=v.Scales[v.ScaleIndex],this.node.setScale(v.CurScale,v.CurScale,v.CurScale)},r.Resize=function(){var e=this.node.position,t=e.x*(v.CurScale/v.LastScale),i=e.y*(v.CurScale/v.LastScale);this.node.position=new p(t,i,e.z)},i}(d),t(V,"PLAYER_DEATH_FOG",240),t(V,"PLAYER_DEATH_FOG_FINAL_SIZE",15),t(V,"PLAYER_DEATH_FOG_SPEED",1/16),x=i((T=j).prototype,"terrainLayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(T.prototype,"entityLayer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(T.prototype,"touchLayer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(T.prototype,"waterLayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(T.prototype,"borderLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=i(T.prototype,"treeLayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(T.prototype,"headInfoLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(T.prototype,"characterPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(T.prototype,"headPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(T.prototype,"use25D",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=T))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var r,t,s,n,o,u,c;return{setters:[function(e){r=e.inheritsLoose,t=e.createClass,s=e.defineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,u=e.math},function(e){c=e.Component}],execute:function(){o._RF.push({},"b4f9fPXisBNJofsX2nS89D0","ResourceGroup",void 0);var i=e("Resource",function(e){function o(){for(var r,t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=e.call.apply(e,[this].concat(o))||this,s(n(r),"val",void 0),s(n(r),"max",void 0),r}r(o,e);var c=o.prototype;return c.OnEnable=function(){},c.OnDisable=function(){},c.UpdateResource=function(e){this.max=e.max,this.val=e.val},t(o,[{key:"Percentage",get:function(){return u.clamp(this.val/this.max,0,1)}}]),o}(c));e("ResourceGroup",function(e){function t(){var r;return r=e.call(this)||this,s(n(r),"resources",void 0),r.resources={},r}r(t,e);var o=t.prototype;return o.AddResource=function(e){return null==this.resources[e]&&(this.resources[e]=new i),this.resources[e]},o.UpdateResources=function(e){for(var r in e)null==this.resources[r]&&(this.resources[r]=new i),this.resources[r].UpdateResource(e[r])},o.GetResource=function(e){return this.resources&&this.resources[e]},t}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIItemPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIItem.ts"],(function(t){"use strict";var e,i,n,r,a,s,l,o,c,u,m,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.defineProperty},function(t){s=t.cclegacy,l=t._decorator,o=t.Node,c=t.Prefab,u=t.instantiate,m=t.Component},function(t){p=t.UIItem}],execute:function(){var f,h,I,b,v,P,d;s._RF.push({},"bc154ktAt5HD47TVZIFUJUX","UIItemPanel",void 0);var y=l.ccclass,g=l.property;t("UIItemPanel",(f=y("UIItemPanel"),h=g(o),I=g(c),f((P=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,n(r(e),"contents",P,r(e)),n(r(e),"itemPrefab",d,r(e)),a(r(e),"items",void 0),e}i(e,t);var s=e.prototype;return s.start=function(){},s.UpdateData=function(t){if(null==this.items||0==this.items.length){this.items=[];for(var e=0;e<12;e++){var i=u(this.itemPrefab),n=i.getComponent(p);this.items.push(n),i.setParent(this.contents)}}for(var r=t.items,a=t.equipment,s={},l=0;l<this.items.length;l++){var o=r[l];if(l<r.length&&null!=o){var c=a&&a.hasEquipItem(o);c&&null==s[o.item]?s[o.item]=o.level:c=!1,this.items[l].bindData(o,c)}else this.items[l].bindData(null,!1)}},e}(m)).prototype,"contents",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(v.prototype,"itemPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Event.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,i=e.EventTarget}],execute:function(){n._RF.push({},"c118fMgD7pADI1V8vqPlIkS","Event",void 0);var o=e("BattleEvent",(function(){}));t(o,"SelectedEntity","SelectedEntity"),t(o,"SelectedTile","SelectedTile"),t(o,"AddTeam","AddTeam"),t(o,"RemoveTeam","RemoveTeam"),t(o,"LookAtEntity","LookAtEntity"),t(o,"RemoveEntity","RemoveEntity"),t(o,"AddEntity","AddEntity"),t(o,"SelectedTeam","SelectedTeam"),t(o,"PacketChange","PacketChange"),t(o,"StepChange","StepChange"),t(o,"FogChange","FogChange");var a=e("EventManager",function(){function e(){}return e.Init=function(){null==this.view&&(this.view=new i),null==this.battle&&(this.battle=new i)},e}());t(a,"view",new i),t(a,"battle",new i);e("PoisonEventData",(function(){t(this,"lR",void 0),t(this,"rR",void 0),t(this,"topC",void 0),t(this,"bottomC",void 0)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./SkillType.ts"],(function(t){"use strict";var e,i,o,s,r,n,a,l,h,c,p,u,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.defineProperty},function(t){n=t.cclegacy,a=t._decorator,l=t.Sprite,h=t.math,c=t.Vec3,p=t.tween,u=t.Component},function(t){g=t.GlobalConfig},function(t){f=t.SkillDir}],execute:function(){var y,d,v,P,m;n._RF.push({},"c2893hp1tRBj55K9AAT+ONc","SkillItem",void 0);var w=a.ccclass,D=a.property;t("SkillItem",(y=w("SkillItem"),d=D(l),y((m=e((P=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(s(e),"view",m,s(e)),r(s(e),"type",void 0),r(s(e),"startPos",void 0),r(s(e),"tagetPos",void 0),r(s(e),"target",void 0),r(s(e),"angle",NaN),e}i(e,t);var n=e.prototype;return n.Init=function(t,e,i,o){this.type=t,this.startPos=e,this.tagetPos=i,this.target=o,this.node.position=this.startPos},n.getDir=function(){var t=Math.atan2(this.tagetPos.y-this.startPos.y,this.tagetPos.x-this.startPos.x),e=h.toDegree(t);return e<22.5&&e>=-22.5?f.Right:e>=22.5&&e<67.5?f.RightUp:e>=67.5&&e<112.5?f.Up:e>=112.5&&e<157.5?f.LeftUp:e>=157.5||e<-157.5?f.Left:e>=-157.5&&e<-112.5?f.LeftDown:e>=-112.5&&e<-67.5?f.Down:e>=-67.5&&e<-22.5?f.RightDown:void 0},n.clear=function(){this.node&&this.node.destroy(),this.target&&this.target.onHit(this.type),this.target=null},n.flyToTaget=function(){var t=g.BASE_FLY_TIME/g.SpeedRate,e=Math.atan2(this.tagetPos.y-this.startPos.y,this.tagetPos.x-this.startPos.x),i=h.toDegree(e);i<0&&(i=360+i),this.view.node.setRotationFromEuler(new c(0,0,i-90));var o=this;p(this.node).to(t,{position:this.tagetPos},{onComplete:function(){o.clear()}}).start()},e}(u)).prototype,"view",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Status.ts","./EntityData.ts","./History.ts","./Inventory.ts","./PlayerResources.ts","./PlayerSkills.ts"],(function(t){"use strict";var n,e,s,r,i,a,o,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.Status},function(t){r=t.EntityData},function(t){i=t.History},function(t){a=t.Inventory},function(t){o=t.PlayerResources},function(t){u=t.PlayerSkills}],execute:function(){e._RF.push({},"c4a21/hhXxH15Zw8F1pBlsv","PlayerData",void 0);t("PlayerData",function(t){function e(n){var e;return(e=t.call(this)||this).status=new s,e.skills=new u,e.resources=new o,e.history=new i,e.inventory=new a,e.UpdateEntityData(n),e}return n(e,t),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/Environment.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,n,o,l,a,s,c,u;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.Node,u=e.Component}],execute:function(){var p,f,v,d,h,y,b;l._RF.push({},"c6b9a6H4FpCBIall+KasXGT","Environment",void 0);var m=a.ccclass,_=a.property;e("Tile",(function(e,i,r){t(this,"r",void 0),t(this,"c",void 0),t(this,"val",void 0),this.r=e,this.c=i,this.val=r})),e("Environment",(p=m("Environment"),f=_(s),v=_({type:c,visible:!0}),p((y=i((h=function(e){function i(){for(var i,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,n(o(i),"tilePrefab",y,o(i)),n(o(i),"terrainLayer",b,o(i)),t(o(i),"tileNodes",void 0),t(o(i),"tiles",void 0),i}r(i,e);var l=i.prototype;return l.Init=function(e){},l.GetNode=function(e,t){return this.tileNodes&&this.tileNodes[t+"_"+e]},l.GetTile=function(e,t){return this.tiles&&this.tiles[e+"_"+t]},l.updateInactiveResources=function(e){},l.Clear=function(){},i}(u)).prototype,"tilePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(h.prototype,"terrainLayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/Equipment.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts","./ItemComponent.ts"],(function(e){"use strict";var t,i,n,l,o,a;return{setters:[function(e){t=e.inheritsLoose,i=e.defineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy},function(e){o=e.Component},function(e){a=e.ItemComponent}],execute:function(){l._RF.push({},"cc74bV8rAxOqL7P3uIearFG","Equipment",void 0);e("Equipment",function(e){function l(){var t;return t=e.call(this)||this,i(n(t),"item_level",void 0),i(n(t),"meleee_attack",void 0),i(n(t),"range_attack",void 0),i(n(t),"mage_attack",void 0),i(n(t),"meleee_defense",void 0),i(n(t),"range_defense",void 0),i(n(t),"mage_defense",void 0),i(n(t),"held",void 0),i(n(t),"hat",void 0),i(n(t),"top",void 0),i(n(t),"bottom",void 0),i(n(t),"ammunition",void 0),t.item_level=0,t.meleee_attack=0,t.range_attack=0,t.mage_attack=0,t.meleee_defense=0,t.range_defense=0,t.mage_defense=0,t}t(l,e);var o=l.prototype;return o.Update=function(e){this.item_level=e.item_level,this.meleee_attack=e.meleee_attack,this.range_attack=e.range_attack,this.mage_attack=e.mage_attack,this.meleee_defense=e.meleee_defense,this.range_defense=e.range_defense,this.mage_defense=e.mage_defense,null==e.held?this.held=null:(null==this.held&&(this.held=new a),this.held.Update(e.held)),null==e.hat?this.hat=null:(null==this.hat&&(this.hat=new a),this.hat.Update(e.hat)),null==e.top?this.top=null:(null==this.top&&(this.top=new a),this.top.Update(e.top)),null==e.bottom?this.bottom=null:(null==this.bottom&&(this.bottom=new a),this.bottom.Update(e.bottom)),null==e.ammunition?this.ammunition=null:(null==this.ammunition&&(this.ammunition=new a),this.ammunition.Update(e.ammunition))},o.hasEquipItem=function(e){return this.held&&this.held.item==e.item&&this.held.level==e.level||this.hat&&this.hat.item==e.item&&this.hat.level==e.level||this.top&&this.top.item==e.item&&this.top.level==e.level||this.bottom&&this.bottom.item==e.item&&this.bottom.level==e.level||this.ammunition&&this.ammunition.item==e.item&&this.ammunition.level==e.level},l}(o));l._RF.pop()}}}));

System.register("chunks:///_virtual/Replay.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cfda4NS1HNDiaDsCSfdKS0J","Replay",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/TileView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceTileType.ts","./TileType.ts"],(function(e){"use strict";var i,t,r,n,a,s,c,l,o,p,u,v,h,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.defineProperty,s=e.createClass},function(e){c=e.cclegacy,l=e._decorator,o=e.Sprite,p=e.SpriteFrame,u=e.randomRange,v=e.Component},function(e){h=e.ResourceTileType},function(e){y=e.TileType}],execute:function(){var f,S,T,b,d,g,m,w,k,z,_,F,x;c._RF.push({},"d0712fX57hIipUTlZi688HF","TileView",void 0);var R=l.ccclass,V=l.property;e("TileView",(f=R("TileView"),S=V(o),T=V([p]),b=V([p]),d=V({type:y}),g=V({type:h}),f((k=i((w=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return i=e.call.apply(e,[this].concat(s))||this,r(n(i),"skin",k,n(i)),r(n(i),"inactiveSprites",z,n(i)),r(n(i),"activeSprites",_,n(i)),a(n(i),"inactiveSprite",void 0),a(n(i),"activeSprite",void 0),r(n(i),"tileType",F,n(i)),r(n(i),"resourceType",x,n(i)),a(n(i),"_index",0),i}return t(i,e),i.prototype.start=function(){null!=this.activeSprites&&(this.index=Math.floor(u(0,this.activeSprites.length)),this.node.active&&(this.skin.spriteFrame=this.activeSprite))},s(i,[{key:"index",set:function(e){this.inactiveSprite=this.inactiveSprites[e],this.activeSprite=this.activeSprites[e],this._index=e}},{key:"active",set:function(e){null!=this.activeSprite?this.skin.spriteFrame=e?this.activeSprite:this.inactiveSprite:this.node.active=e}}]),i}(v)).prototype,"skin",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(w.prototype,"inactiveSprites",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=i(w.prototype,"activeSprites",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(w.prototype,"tileType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(w.prototype,"resourceType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=w))||m));c._RF.pop()}}}));

System.register("chunks:///_virtual/StatisticalManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./EntityManager.ts"],(function(t){"use strict";var e,a,i,n;return{setters:[function(t){e=t.defineProperty},function(t){a=t.cclegacy},function(t){i=t.GlobalConfig},function(t){n=t.EntityManager}],execute:function(){a._RF.push({},"d17466CiONL4I4BjEFlNrv+","StatisticalManager",void 0);var r=t("StatisticalData",function(){function t(t,a,i,n,r,o){e(this,"rank",void 0),e(this,"teamName",void 0),e(this,"score",void 0),e(this,"alive",void 0),e(this,"defeat",void 0),e(this,"gold",void 0),e(this,"dmgtaken",void 0),e(this,"isEnd",void 0),this.teamName=t,this.alive=a,this.defeat=i,this.gold=n,this.dmgtaken=r,this.score=this.defeat+this.alive,this.isEnd=o}return t.calculateScore=function(t,e,a,i){throw new Error("Method not implemented.")},t}());e(r,"high",21),e(r,"mid",10),e(r,"low",4);var o=t("StatisticalManager",function(){function t(){}var e=t.prototype;return e.GetItems=function(){for(var t=[],e=n.instance.teams,a=0;a<e.length;a++){var i=this.calculateStatisticalData(e[a]);t.push(i)}t.sort((function(t,e){return e.score-t.score}));for(var r=0;r<t.length;r++)t[r].rank=r+1;return t},e.calculateStatisticalData=function(t){if(i.isEnd){var e=n.instance.GetTeamByName(t),a=i.replay.metrics.AliveScore[e.population],o=i.replay.metrics.DamageTaken[e.population],l=i.replay.metrics.DefeatScore[e.population],s=i.replay.metrics.Gold[e.population];i.replay.metrics.TimeAlive[e.population],i.replay.metrics.TotalScore[e.population];return new r(t,null!=a?a:0,null!=l?l:0,null!=s?s:0,null!=o?o:0,!0)}for(var c=n.instance.GetPlayersByTeam(t),u=0,d=0,h=0,p=0,v=0;v<c.length;v++){var m=c[v].data.metrics;u=Math.max(u,m.TimeAlive),d+=m.PlayerDefeats,h+=m.Gold,p+=m.DamageTaken}return new r(t,u,d/2,h,p,!1)},t}());e(o,"instance",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/TileType.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Enum}],execute:function(){var i;e("TileType",void 0),t._RF.push({},"d1c09dz/RZOHL67b8/7Xivd","TileType",void 0),function(e){e[e.None=0]="None",e[e.Water=1]="Water",e[e.Grass=2]="Grass",e[e.Land=3]="Land",e[e.Stone=4]="Stone"}(i||(i=e("TileType",{}))),n(i),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIMarket.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIItem.ts","./UIMarketItem.ts"],(function(e){"use strict";var t,r,i,n,a,o,c,l,s,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Node,l=e.Prefab,s=e.Component},function(e){u=e.ItemName},function(e){p=e.UIMarketItem,f=e.MarketItemData}],execute:function(){var m,b,v,y,I,d,h,k,D;a._RF.push({},"d43c1k4jspDNo0fdZkWv0yA","UIMarket",void 0);var g=o.ccclass,M=o.property;e("UIMarket",(m=g("UIMarket"),b=M(c),v=M(l),y=M({type:[p]}),m((h=t((d=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(n(t),"contents",h,n(t)),i(n(t),"itemPrefab",k,n(t)),i(n(t),"items",D,n(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.bindData=function(e){var t={};for(var r in e){var i=r.split("_"),n=i[0],a=+i[1],o=e[r].price;null==t[n]&&(t[n]=new f,t[n].name=n,t[n].priceDic={}),t[n].priceDic[a]=o}for(var c=0;c<this.items.length;c++){var l=this.items[c],s=u[l.itemName];null!=t[s]?l.bindData(t[s]):l.bindData(null)}},a.onClose=function(){this.node.active=!1},t}(s)).prototype,"contents",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(d.prototype,"itemPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(d.prototype,"items",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=d))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/DamegManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIDamge.ts"],(function(e){"use strict";var t,o,n,a,r,i,s,l,c,g,u,p;return{setters:[function(e){t=e.defineProperty,o=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,l=e.Prefab,c=e.Color,g=e.instantiate,u=e.Component},function(e){p=e.UIDamge}],execute:function(){var d,f,m,h,v,D,P;i._RF.push({},"db3ddxWW/1IGIwc7BdW3fWs","DamegManager",void 0);var w=s.ccclass,C=s.property;e("DamgeManager",(d=w("DamgeManager"),f=C(l),d((P=D=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"damagePrefab",v,r(t)),t}n(t,e);var o=t.prototype;return o.start=function(){t.instance=this},o.showDamge=function(e,o,n){void 0===n&&(n=null);var a=g(this.damagePrefab);a.position=o;var r=a.getComponent(p);r.setText("HP"+e,t.ColorDic.damge),r.follow=n,a.setParent(this.node)},o.showGetGold=function(e,o,n){void 0===n&&(n=null);var a=g(this.damagePrefab);a.position=o,a.getComponent(p).setText("Gold+"+e,t.ColorDic.gold),a.getComponent(p).follow=n,a.setParent(this.node)},o.showUsePoultice=function(e,o,n){void 0===n&&(n=null);var a=g(this.damagePrefab);a.position=o,a.getComponent(p).setText(e,t.ColorDic.poultice),a.getComponent(p).follow=n,a.setParent(this.node)},t}(u),t(D,"ColorDic",{damge:(new c).fromHEX("#C30303"),gold:(new c).fromHEX("#EAE509"),poultice:(new c).fromHEX("#2B7A0B")}),t(D,"instance",void 0),v=o((h=P).prototype,"damagePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=h))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TileInfoPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts"],(function(e){"use strict";var i,t,n,r,l,o,a,c,s,u,p,f;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Label,c=e.Sprite,s=e.SpriteFrame,u=e.Component},function(e){p=e.EventManager,f=e.BattleEvent}],execute:function(){var b,v,h,y,I,d,g,T,m,_,w;l._RF.push({},"dba2cHHkXFFcL8WolWwnnTx","TileInfoPanel",void 0);var z=o.ccclass,F=o.property;e("TileInfoPanel",(b=z("TileInfoPanel"),v=F(a),h=F(a),y=F(c),I=F({type:[s],visible:!0}),b((T=i((g=function(e){function i(){var i;return i=e.call(this)||this,n(r(i),"tileInfo",T,r(i)),n(r(i),"resource",m,r(i)),n(r(i),"icon",_,r(i)),n(r(i),"tiles",w,r(i)),p.view.on(f.SelectedTile,i.BinTileInfo,r(i)),i}t(i,e);var l=i.prototype;return l.start=function(){},l.BinTileInfo=function(e){null==e?this.node.active=!1:(this.node.active=!0,this.icon.spriteFrame=this.tiles[e.val],this.tileInfo.string="tile_"+e.r+"_"+e.c)},i}(u)).prototype,"tileInfo",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=i(g.prototype,"resource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(g.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(g.prototype,"tiles",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=g))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/UISkillPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var l,i,r,t,n,a,o,s,u;return{setters:[function(e){l=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized,n=e.defineProperty},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,u=e.Component}],execute:function(){var c,p,g,b,v,h,m,f,y,k,S,z,d,G,w,P,U,D,I;a._RF.push({},"df4c11UtGdCH5GeQyiO7zUJ","UISkillPanel",void 0);var _=o.ccclass,L=o.property;e("UISkillPanel",(c=_("UISkillPanel"),p=L(s),g=L(s),b=L(s),v=L(s),h=L(s),m=L(s),f=L(s),y=L(s),c((z=l((S=function(e){function l(){for(var l,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return l=e.call.apply(e,[this].concat(a))||this,r(t(l),"melee",z,t(l)),r(t(l),"range",d,t(l)),r(t(l),"carving",G,t(l)),r(t(l),"mage",w,t(l)),r(t(l),"fishing",P,t(l)),r(t(l),"alchemy",U,t(l)),r(t(l),"herbalism",D,t(l)),r(t(l),"prospecting",I,t(l)),n(t(l),"skillDic",void 0),l}i(l,e);var a=l.prototype;return a.start=function(){},a.UpdateData=function(e){var l=e.GetSkill("melee");this.melee.string=null!=l?""+l.level:"0";var i=e.GetSkill("range");this.range.string=null!=i?""+i.level:"0";var r=e.GetSkill("carving");this.carving.string=null!=r?""+r.level:"0";var t=e.GetSkill("mage");this.mage.string=null!=t?""+t.level:"0";var n=e.GetSkill("fishing");this.fishing.string=null!=n?""+n.level:"0";var a=e.GetSkill("alchemy");this.alchemy.string=null!=a?""+a.level:"0";var o=e.GetSkill("herbalism");this.herbalism.string=null!=o?""+o.level:"0";var s=e.GetSkill("prospecting");this.prospecting.string=null!=s?""+s.level:"0"},l}(u)).prototype,"melee",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=l(S.prototype,"range",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=l(S.prototype,"carving",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=l(S.prototype,"mage",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=l(S.prototype,"fishing",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=l(S.prototype,"alchemy",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=l(S.prototype,"herbalism",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=l(S.prototype,"prospecting",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=S))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./GlobalConfig.ts"],(function(e){"use strict";var i,a,t,n,l,r;return{setters:[function(e){i=e.cclegacy,a=e.math,t=e.Vec3,n=e.Vec2,l=e.UITransform},function(e){r=e.GlobalConfig}],execute:function(){i._RF.push({},"e3c09FHhlJLAbs5P+JsUbUw","Utils",void 0);e("Utils",function(){function e(){}return e.GetPlayerLastData=function(e){if(null==r.LastDataMap[e]&&null!=r.replay&&null!=r.replay.packets)for(var i=r.replay.packets,a=i.length-1;a>0;a--)if(null!=i[a].player[e]){r.LastDataMap[e]=i[a].player[e];break}return r.LastDataMap[e]},e.GetDragPos=function(e){var i=r.RealMapPixelSize.x*r.CurScale/2,n=r.RealMapPixelSize.y*r.CurScale/2,l=a.clamp(e.x,-i,i),o=a.clamp(e.y,-n,n);return new t(l,o)},e.GetTilePos=function(e,i){if(r.Use25D){var a=r.HRhombusSize.width,n=r.HRhombusSize.height,l=-a*e+i*a,o=(r.MapSize-e-i)*n-r.TilePixelSize.y/2;return new t(l,o,o)}var u=(e-r.MapSize/2)*r.TilePixelSize.x,c=(i-r.MapSize/2)*r.TilePixelSize.y;return new t(u,c,c)},e.RCToTileOrigin=function(e,i){if(r.Use25D){var a=r.HRhombusSize.width,n=r.HRhombusSize.height,l=-a*e+i*a,o=(r.MapSize-e-i)*n-n;return new t(l,o,o)}var u=(e-r.MapSize/2)*r.TilePixelSize.x,c=(i-r.MapSize/2)*r.TilePixelSize.y;return new t(u,c,c)},e.PosToTile=function(e){e.x,r.TilePixelSize.x,r.MapSize,e.y,r.TilePixelSize.y,r.MapSize;return n.ZERO},e.PosToTile2D=function(e){e.x=e.x+r.TilePixelSize.x/2,e.y=e.y+r.TilePixelSize.y/2;var i=Math.floor(e.x/r.TilePixelSize.x)+r.MapSize/2,a=Math.floor(e.y/r.TilePixelSize.y)+r.MapSize/2;return i=Math.max(0,Math.min(r.MapSize-1,i)),a=Math.max(0,Math.min(r.MapSize-1,a)),new n(i,a)},e.ConvertToRoman=function(e){for(var i="",a=Math.floor(e/1e3),t=Math.floor(e%1e3/100),n=Math.floor(e%100/10),l=e%10,r=0;r<a;r++)i+="M";return t&&(i+=["C","CC","CCC","CD","D","DC","DCC","DCCC","CM"][t-1]),n&&(i+=["X","XX","XXX","XL","L","LX","LXX","LXXX","XC"][n-1]),l&&(i+=["I","II","III","IV","V","VI","VII","VIII","IX"][l-1]),i},e.InViewport=function(e,i){var a=new t(0,0,0);return a=i.getComponent(l).convertToWorldSpaceAR(a),a=r.CanvasNode.getComponent(l).convertToNodeSpaceAR(a),e.contains(new n(a.x,a.y))},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Market.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(t){"use strict";var e,i,n,r,o;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy},function(t){o=t.Component}],execute:function(){r._RF.push({},"eae1b0LeodFM4vTHx6Y/LhM","Market",void 0);t("Market",function(t){function r(){var e;return e=t.call(this)||this,i(n(e),"itemDic",void 0),e.itemDic={},e}return e(r,t),r.prototype.Update=function(t){for(var e in t.market)this.itemDic[e]=t.market[e];for(var i in this.itemDic)null==t.market[i]&&delete this.itemDic[i]},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/Melee.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillItem.ts"],(function(e){"use strict";var t,n,i,r,c,l;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator},function(e){l=e.SkillItem}],execute:function(){var o;r._RF.push({},"ec7f3+9cn9EqpXuXA6LVz/v","Melee",void 0);var s=c.ccclass;c.property,e("Melee",s("Melee")(o=function(e){function r(){for(var t,r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return t=e.call.apply(e,[this].concat(c))||this,n(i(t),"anim",[]),n(i(t),"index",0),n(i(t),"animSpeed",60),n(i(t),"lastTime",0),n(i(t),"meleeTime",.5),t}return t(r,e),r.prototype.start=function(){this.flyToTaget()},r}(l))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/Packet.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"f37ce2dO19GvIOfnyPVxWs5","Packet",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceView.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,c,o,s,a,p,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,c=e.defineProperty,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.Sprite,l=e.Component}],execute:function(){var u,v,f,h,d;s._RF.push({},"feb4fXfE6pOlbZEjMqnpBWc","ResourceView",void 0);var y=a.ccclass,S=a.property;e("ResourceView",(u=y("ResourceView"),v=S(p),u((d=i((h=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,r(n(i),"skin",d,n(i)),c(n(i),"inactiveSprite",void 0),c(n(i),"activeSprite",void 0),c(n(i),"node",void 0),i}return t(i,e),o(i,[{key:"active",set:function(e){null!=this.inactiveSprite?this.skin.spriteFrame=e?this.activeSprite:this.inactiveSprite:this.node.active=e}}]),i}(l)).prototype,"skin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UIStatisticalItem.ts","./ResourceTileType.ts","./Event.ts","./GlobalConfig.ts","./Profession.ts","./Utils.ts","./EntityView.ts","./Component.ts","./Status.ts","./Metrics.ts","./EntityData.ts","./ItemComponent.ts","./Actions.ts","./History.ts","./ResourceGroup.ts","./NPCResources.ts","./SkillGroup.ts","./NpcSKills.ts","./Equipment.ts","./Inventory.ts","./NpcData.ts","./PlayerResources.ts","./PlayerSkills.ts","./PlayerData.ts","./ZIndex.ts","./UIDamge.ts","./DamegManager.ts","./HeadInfo.ts","./EntityManager.ts","./SkillType.ts","./SkillItem.ts","./SkillManager.ts","./Entity.ts","./ResourcesHelper.ts","./UIItem.ts","./Range.ts","./Main.ts","./DropdownItem.ts","./Demo.ts","./StatisticalManager.ts","./UIStatisticalData.ts","./UISkillPanel.ts","./UIPropertyPanel.ts","./UIItemPanel.ts","./UIInfo.ts","./UIAgentStatus.ts","./UIMarketLevelPrice.ts","./UIMarketItem.ts","./TileType.ts","./TilePrefabMap.ts","./DropdownOptionData.ts","./UITeamOptionData.ts","./TileView.ts","./Environment.ts","./Environment25D.ts","./DeathFogCol.ts","./Dropdown.ts","./UITeamAgent.ts","./UITeamScroll.ts","./UIAgenInfoPanel.ts","./Environment2D.ts","./Mage.ts","./World.ts","./UIMarket.ts","./UIGame.ts","./UIAgentStatusItem.ts","./Adapter.ts","./LoadoutGroup.ts","./Replay.ts","./TileInfoPanel.ts","./Market.ts","./Melee.ts","./Packet.ts","./ResourceView.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});